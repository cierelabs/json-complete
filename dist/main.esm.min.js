var e=e=>Object.prototype.toString.call(e).slice(8,-1),r=(e,r)=>e[r]&&!e[r].e;const n=e=>{const r=[],n={};Array.prototype.forEach.call(e,(e,t)=>{n[String(t)]=1,r.push(t)});let t=0,o=Object.keys(e).filter(e=>!n[e]).concat(Object.getOwnPropertySymbols(e).filter(e=>{const r=String(e).match(/^Symbol\(Symbol\.([^\)]*)\)$/);return null===r||2!==r.length||Symbol[r[1]]!==e}));return r.concat(o).reduce((r,n)=>(n===t?(t+=1,r.n.push(e[n])):r.t.push([n,e[n]]),r),{n:[],t:[]})},t=(r,n,t)=>{const o=Object.keys(r).find(e=>r[e].o(n));if(!o){if(t)return"ob";throw new Error(`Unsupported type "${e(n)}". Encoding halted.`)}return o},o=(e,n)=>{void 0!==e.i.get(n)||r(e.a,t(e.a,n,e.d))||e.c.push(n)};var i=(e,i)=>{const a=t(e.a,i,e.d);if(r(e.a,a))return a;const d=e.i.get(i);if(void 0!==d)return d.u;e[a]=e[a]||[],e[a].push(void 0);const c=e[a].length-1,u={y:a,_:c,u:a+c,l:i,n:[],t:[]};e.i.set(i,u),e.a[a].f&&e.s.push(u);const y=n(i);let _=y.n;const l=y.t;return e.a[a].b&&(_=[]),u.n=_,u.t=l,_.forEach(r=>{o(e,r)}),l.forEach(r=>{o(e,r[0]),o(e,r[1])}),u.u},a=e=>({o:r=>r===e,A:()=>e}),d=a(void 0),c=a(null),u={o:e=>e!=e,A:()=>NaN},y=a(1/0),_=a(-1/0),l={o:e=>0===e&&1/e==-1/0,A:()=>-0},f=a(!0),s=a(!1),b=(r,n)=>({o:t=>e(t)===r&&!(t instanceof n),e:(e,r)=>r.l,p:(e,r,n)=>e.g[r][n],A:(e,r)=>r.l}),A=b("Number",Number),p=b("String",String),g=e=>({y:e.substring(0,2),_:parseInt(e.substring(2),10)}),E=(e,n)=>{if(r(e.a,n))return e.a[n].A();const t=g(n);return e.a[t.y].p(e,t.y,t._)},S=(e,n)=>{if(r(e.a,n))return e.a[n].A();const t=g(n);return e.a[t.y]?e.S[n].l:n},v=(e,r,n)=>{n.forEach(n=>{r.l[S(e,n[0])]=S(e,n[1])})},w=(e,r)=>{v(e,r,r.w.slice(1))},U=r=>n=>e(n)===r,m=(e,r,n)=>({o:U(e),e:r,p:n,A:w}),R=m("Symbol",(e,r)=>{const n=Symbol.keyFor(r.l),t=void 0!==n;return[i(e,t?1:0),i(e,t?n:String(r.l).slice(7,-1))]},(e,r,n)=>{const t=e.g[r][n],o=E(e,t[1]);return 1===E(e,t[0])?Symbol.for(o):Symbol(o)}),F=(e,r)=>[r.n.map(r=>i(e,r))],I=(e,r)=>({o:U(e),e:F,p:r,A:(e,r)=>{r.w[0].forEach((n,t)=>{r.l[t]=S(e,n)}),w(e,r)}}),B=I("Array",()=>[]),h=I("Arguments",(e,r,n)=>(function(){return arguments}).apply(null,Array.from({length:e.g[r][n][0].length},()=>{}))),x={o:U("Object"),e:()=>[],p:()=>({}),A:(e,r)=>{v(e,r,r.w)}},O=(r,n)=>({o:t=>e(t)===r&&t instanceof n,e:(e,r)=>[i(e,r.l.valueOf())],p:(e,r,t)=>new n(E(e,e.g[r][t][0])),A:w}),j=O("Boolean",Boolean),V=O("Number",Number),M=Object.assign({b:1},O("String",String)),N=O("Date",Date),k=m("RegExp",(e,r)=>[[i(e,r.l.source),i(e,r.l.flags),i(e,r.l.lastIndex)]],(e,r,n)=>{const t=e.g[r][n][0],o=new RegExp(E(e,t[0]),E(e,t[1]));return o.lastIndex=E(e,t[2]),o});const C={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var T=m("Error",(e,r)=>[[i(e,C[r.l.name]?r.l.name:"Error"),i(e,r.l.message),i(e,r.l.stack)]],(e,r,n)=>{const t=e.g[r][n][0],o=new(C[E(e,t[0])]||Error)(E(e,t[1]));return o.stack=E(e,t[2]),o}),D=(e,r)=>({o:U(e),e:(e,r)=>(r.n=Array.from(new Uint8Array(r.l)),F(e,r)),p:(e,n,t)=>{const o=e.g[n][t][0],i=new r(o.length),a=new Uint8Array(i);return o.forEach((r,n)=>{a[n]=E(e,r)}),i},A:w}),$=D("ArrayBuffer",ArrayBuffer),q=D("SharedArrayBuffer",SharedArrayBuffer),z=(e,r)=>I(e,(e,n,t)=>new r(e.g[n][t][0].length)),G=z("Int8Array",Int8Array),H=z("Uint8Array",Uint8Array),J=z("Uint8ClampedArray",Uint8ClampedArray),K=z("Int16Array",Int16Array),L=z("Uint16Array",Uint16Array),P=z("Int32Array",Int32Array),Q=z("Uint32Array",Uint32Array),W=z("Float32Array",Float32Array),X=z("Float64Array",Float64Array),Y=(e,r,n,t)=>({o:U(e),e:(e,r)=>[Array.from(r.l).map(r=>n(e,r))],p:()=>new r,A:(e,r)=>{r.w[0].forEach(n=>{t(e,r.l,n)}),w(e,r)}}),Z=Y("Set",Set,(e,r)=>i(e,r),(e,r,n)=>{r.add(S(e,n))}),ee=Y("Map",Map,(e,r)=>[i(e,r[0]),i(e,r[1])],(e,r,n)=>{r.set(S(e,n[0]),S(e,n[1]))}),re=(e,r,n)=>({o:U(e),e:(e,n)=>[[new Uint8Array(0)].concat(r.map(r=>i(e,n.l[r])))],f:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{const o=new Uint8Array(t.result),a=i(e,o),d=g(a);e[d.y][d._]=[Array.from(o).map(r=>{const n=i(e,r),t=g(n);return e[t.y][t._]=r,n})],e[r.y][r._][0][0]=a,n()}),t.readAsArrayBuffer(r.l)},p:(e,r,t)=>{const o=e.g[r][t][0],i=g(o[0]);return n(e,[new Uint8Array(e.g[i.y][i._][0].map(r=>E(e,r)))],o)},A:w}),ne=re("Blob",["type"],(e,r,n)=>new Blob(r,{type:E(e,n[1])})),te=re("File",["name","type","lastModified"],(e,r,n)=>new File(r,E(e,n[1]),{type:E(e,n[2]),lastModified:E(e,n[3])}));const oe={un:d,nl:c,na:u,pI:y,nI:_,n0:l,bt:f,bf:s,nm:A,st:p,sy:R,ar:B,ag:h,ob:x,BO:j,NM:V,ST:M,da:N,re:k,er:T,AB:$,SA:q,I1:G,U1:H,C1:J,I2:K,U2:L,I3:P,U3:Q,F3:W,F4:X,Se:Z,Ma:ee,Bl:ne,Fi:te},ie=(r,n)=>{const t="Function"===e(r.U)?r.U:void 0;(r=Object.keys(r).reduce((e,n)=>("_"!==n[0]&&(e[n]=r[n]),e),{})).r=n,r.v="1.0.0";const o=Object.keys(r).map(e=>[e,r[e]]);if(!t)return o;t(o)};var ae=(n,t)=>{const o={d:(t=t||{}).safeMode,U:t.onFinish,a:oe,i:new Map,c:[],s:[]},a=i(o,n);if(r(oe,a))return ie(o,a);for(o.c.push(n);o.c.length;)i(o,o.c.shift());if(o.i.forEach(e=>{o[e.y][e._]=oe[e.y].e(o,e),e.t.length>0&&(o[e.y][e._]=o[e.y][e._].concat(e.t.map(e=>[i(o,e[0]),i(o,e[1])])))}),!(o.s.length>0))return ie(o,o.i.get(n).u);{if("Function"!==e(o.U)){if(o.d)return ie(o,o.i.get(n).u);throw new Error("Encoded value contained a deferred type (File and Blob), but no `options.onFinish` function provided.")}let r=o.s.length;const t=()=>{if(0===(r-=1))return ie(o,o.i.get(n).u)};o.s.forEach(e=>{oe[e.y].f(o,e,t)})}};const de=(r,n)=>{"Array"===e(n)?n.forEach(e=>{de(r,e)}):r.c.push(n)},ce=(n,t)=>{const o=g(t);if(!oe[o.y]||void 0!==n.S[t]||r(oe,o.y))return;const i={y:o.y,_:o._,u:t,l:void 0,w:[]};n.S[t]=i,i.l=oe[o.y].p(n,i.y,i._),i.w=n.g[i.y][i._],"Array"===e(i.w)&&de(n,i.w)};var ue=e=>{const n={a:oe,g:e.reduce((e,r)=>(e[r[0]]=r[1],e),{}),S:{},c:[]},t=g(n.g.r);if(!oe[t.y])return n.g.r;if(r(oe,t.y))return oe[t.y].A();for(n.c.push(n.g.r);n.c.length;)ce(n,n.c.shift());return Object.values(n.S).forEach(e=>{oe[e.y].A(n,e)}),n.S[n.g.r].l},ye={encode:ae,decode:ue};export default ye;