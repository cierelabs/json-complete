var e=(e,r,n)=>{const t=new Error(e);return t.operation=r,t.type=n,t},r=e=>Object.prototype.toString.call(e).slice(8,-1);const n=(e,r)=>{const n=[],t={};Array.prototype.forEach.call(e,(e,r)=>{t[String(r)]=1,n.push(r)});let o=0,i=Object.keys(e).filter(e=>!t[e]);return r&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(e=>Symbol[String(e).slice(14,-1)]!==e))),n.concat(i).reduce((r,n)=>(n===o?(o+=1,r.e.push(e[n])):r.n.push([n,e[n]]),r),{e:[],n:[]})},t=(n,t)=>{const o=Object.keys(n.t).find(e=>n.t[e].o(t));if(!o&&!n.i){const n=r(t);throw e(`Cannot encode unsupported type "${n}".`,"encode",n)}return o||"ob"},o=(e,r)=>{e.t[t(e,r)].a&&e.y.push(r)};var i=(e,r)=>{const i=t(e,r);if(!e.t[i].a)return i;const a=e.d.get(r);if(void 0!==a)return a.f;e.c[i]=e.c[i]||[],e.c[i].push(void 0);const y=e.c[i].length-1,d=n(r,e.u),f={_:i,l:y,f:i+y,p:r,e:e.t[i].s?[]:d.e,n:d.n};return e.d.set(r,f),e.t[i].A&&e.b.push(f),f.e.forEach(r=>{o(e,r)}),f.n.forEach(r=>{o(e,r[0]),o(e,r[1])}),f.f},a=e=>({o:r=>r===e,g:e}),y=a(void 0),d=a(null),f={o:e=>e!=e,g:NaN},c=a(1/0),u=a(-1/0),_={o:e=>0===e&&1/e==-1/0,g:-0},l=a(!0),p=a(!1),s=e=>({_:e.slice(0,2),l:parseInt(e.slice(2),10)}),A=(e,r)=>{if(e.t[r])return e.t[r].g;const n=s(r);return e.t[n._].S(e,n._,n.l)},b=(e,n,t,o)=>({o:t=>r(t)===e&&!(t instanceof n),I:t,S:o,a:()=>{}}),g=b("Number",Number,(e,r)=>i(e,String(r.p)),(e,r,n)=>parseFloat(A(e,e.U[r][n]))),S=Object.assign({s:1},b("String",String,(e,r)=>r.p,(e,r,n)=>e.U[r][n])),I=e=>n=>r(n)===e,E=(e,r)=>"function"===e?r():{o:()=>{}},U=E(typeof Symbol,()=>({o:I("Symbol"),I:(e,r)=>{const n=Symbol.keyFor(r.p),t=void 0!==n;return[i(e,!!t),i(e,t?n:String(r.p).slice(7,-1))]},S:(e,r,n)=>{const t=e.U[r][n],o=A(e,t[1]);return A(e,t[0])?Symbol.for(o):Symbol(o)},a:()=>{}})),m=(e,r)=>[r.e.map(r=>i(e,r))],w=(e,r)=>{if(e.t[r])return e.t[r].g;const n=s(r);return e.t[n._]?e.m[r].p:r},B=(e,r,n)=>{n.forEach(n=>{r.p[w(e,n[0])]=w(e,n[1])})},R=(e,r)=>{B(e,r,r.w.slice(1))},v=(e,r)=>({o:I(e),I:m,S:r,a:(e,r)=>{r.w[0].forEach((n,t)=>{r.p[t]=w(e,n)}),R(e,r)}}),F=v("Array",()=>[]),h=v("Arguments",(e,r,n)=>(function(){return arguments}).apply(null,Array(e.U[r][n][0].length))),j={o:I("Object"),I:()=>[],S:()=>({}),a:(e,r)=>{B(e,r,r.w)}},x=(e,n)=>({o:t=>r(t)===e&&t instanceof n,I:(e,r)=>[i(e,r.p.valueOf())],S:(e,r,t)=>new n(A(e,e.U[r][t][0])),a:R}),O=x("Boolean",Boolean),V=x("Number",Number),C=Object.assign({s:1},x("String",String)),M=x("Date",Date),N=(e,r,n)=>({o:I(e),I:r,S:n,a:R}),$=N("RegExp",(e,r)=>[[i(e,r.p.source),i(e,r.p.flags),i(e,r.p.lastIndex)]],(e,r,n)=>{const t=e.U[r][n][0],o=new RegExp(A(e,t[0]),A(e,t[1]));return o.lastIndex=A(e,t[2]),o});const k={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var z=N("Error",(e,r)=>[[i(e,k[r.p.name]?r.p.name:"Error"),i(e,r.p.message),i(e,r.p.stack)]],(e,r,n)=>{const t=e.U[r][n][0],o=new(k[A(e,t[0])]||Error)(A(e,t[1]));return o.stack=A(e,t[2]),o}),T=(e,r)=>({o:I(e),I:(e,r)=>(r.e=Array.from(new Uint8Array(r.p)),m(e,r)),S:(e,n,t)=>{const o=e.U[n][t][0],i=new r(o.length),a=new Uint8Array(i);return o.forEach((r,n)=>{a[n]=A(e,r)}),i},a:R}),D=E(typeof ArrayBuffer,()=>T("ArrayBuffer",ArrayBuffer)),K=E(typeof SharedArrayBuffer,()=>T("SharedArrayBuffer",SharedArrayBuffer)),q=(e,r)=>v(e,(e,n,t)=>new r(e.U[n][t][0].length)),G=E(typeof Int8Array,()=>q("Int8Array",Int8Array)),H=E(typeof Uint8Array,()=>q("Uint8Array",Uint8Array)),J=E(typeof Uint8ClampedArray,()=>q("Uint8ClampedArray",Uint8ClampedArray)),L=E(typeof Int16Array,()=>q("Int16Array",Int16Array)),P=E(typeof Uint16Array,()=>q("Uint16Array",Uint16Array)),Q=E(typeof Int32Array,()=>q("Int32Array",Int32Array)),W=E(typeof Uint32Array,()=>q("Uint32Array",Uint32Array)),X=E(typeof Float32Array,()=>q("Float32Array",Float32Array)),Y=E(typeof Float64Array,()=>q("Float64Array",Float64Array)),Z=(e,r,n,t)=>({o:I(e),I:(e,r)=>[Array.from(r.p).map(r=>n(e,r))],S:()=>new r,a:(e,r)=>{r.w[0].forEach(n=>{t(e,r.p,n)}),R(e,r)}}),ee=E(typeof Set,()=>Z("Set",Set,(e,r)=>i(e,r),(e,r,n)=>{r.add(w(e,n))})),re=E(typeof Map,()=>Z("Map",Map,(e,r)=>[i(e,r[0]),i(e,r[1])],(e,r,n)=>{r.set(w(e,n[0]),w(e,n[1]))})),ne=(e,r,n)=>({o:I(e),A:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{r.B=i(e,new Uint8Array(t.result)),n()}),t.readAsArrayBuffer(r.p)},I:(e,n)=>[[n.B].concat(r.map(r=>i(e,n.p[r])))],S:(e,r,t)=>{const o=e.U[r][t][0],i=s(o[0]);return n(e,[new Uint8Array(e.U[i._][i.l][0].map(r=>A(e,r)))],o)},a:R}),te=E(typeof Blob,()=>ne("Blob",["type"],(e,r,n)=>new Blob(r,{type:A(e,n[1])}))),oe=E(typeof File,()=>ne("File",["name","type","lastModified"],(e,r,n)=>new File(r,A(e,n[1]),{type:A(e,n[2]),lastModified:A(e,n[3])}))),ie=E(typeof BigInt,()=>b("BigInt",BigInt,(e,r)=>i(e,String(r.p)),(e,r,n)=>BigInt(A(e,e.U[r][n]))));const ae={un:y,nl:d,na:f,pI:c,nI:u,n0:_,bt:l,bf:p,nm:g,st:S,sy:U,ar:F,ag:h,ob:j,BO:O,NM:V,ST:C,da:M,re:$,er:z,AB:D,SA:K,I1:G,U1:H,C1:J,I2:L,U2:P,I3:Q,U3:W,F3:X,F4:Y,Se:ee,Ma:re,Bl:te,Fi:oe,BI:ie},ye=(e,r)=>{e.d.forEach(r=>{e.c[r._][r.l]=ae[r._].I(e,r),r.n.length>0&&(e.c[r._][r.l]=e.c[r._][r.l].concat(r.n.map(r=>[i(e,r[0]),i(e,r[1])])))}),e.c.r=r,e.c.v="1.0.0";const n=Object.keys(e.c).map(r=>[r,e.c[r]]);if("function"!=typeof e.R)return n;e.R(n)};var de=(r,n)=>{const t={i:(n=n||{}).safeMode,u:n.encodeSymbolKeys,R:n.onFinish,t:ae,d:new Map,y:[],b:[],c:{}},o=i(t,r);if(ae[o])return ye(t,o);for(t.y.push(r);t.y.length;)i(t,t.y.shift());if(!(t.b.length>0))return ye(t,o);{if("function"!=typeof n.onFinish){if(t.i)return ye(t,o);throw e("Found deferred type, but no onFinish option provided.","encode")}let r=t.b.length;const i=()=>{if(0===(r-=1))return ye(t,o)};t.b.forEach(e=>{ae[e._].A(t,e,i)})}};const fe=(e,n)=>{"Array"===r(n)?n.forEach(r=>{fe(e,r)}):e.y.push(n)},ce=(n,t)=>{const o=s(t);if(!ae[o._]){if(n.i)return;throw e(`Cannot decode unrecognized pointer type "${o._}".`,"decode",o._)}if(!ae[t]&&void 0===n.m[t]){n.m[t]={_:o._,l:o.l,f:t,p:void 0,w:n.U[o._][o.l]};try{n.m[t].p=ae[o._].S(n,o._,o.l)}catch(r){throw e(`Cannot generate recognized object type from pointer type "${o._}".`,"decode")}"Array"===r(n.m[t].w)&&fe(n,n.m[t].w)}};var ue=(r,n)=>{const t={i:(n=n||{}).safeMode,t:ae,U:r.reduce((e,r)=>(e[r[0]]=r[1],e),{}),m:{},y:[]},o=t.U.r;if(ae[o])return ae[o].g;const i=s(o);if(!ae[i._]){if(t.i)return o;throw e(`Cannot decode unrecognized pointer type "${i._}".`,"decode",i._)}for(t.y.push(o);t.y.length;)ce(t,t.y.shift());return Object.values(t.m).forEach(e=>{ae[e._].a(t,e)}),t.m[o].p},_e={encode:de,decode:ue};export default _e;