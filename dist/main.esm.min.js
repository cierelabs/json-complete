var e=e=>Object.prototype.toString.call(e).slice(8,-1);const r=e=>{const r=[],n={};Array.prototype.forEach.call(e,(e,t)=>{n[String(t)]=1,r.push(t)});let t=0,o=Object.keys(e).filter(e=>!n[e]).concat(Object.getOwnPropertySymbols(e).filter(e=>Symbol[String(e).slice(14,-1)]!==e));return r.concat(o).reduce((r,n)=>(n===t?(t+=1,r.e.push(e[n])):r.n.push([n,e[n]]),r),{e:[],n:[]})},n=(r,n)=>{const t=Object.keys(r.t).find(e=>r.t[e].o(n));if(!t&&!r.i)throw new Error(`Cannot encode unsupported type "${e(n)}".`);return t||"ob"},t=(e,r)=>{(e.t[n(e,r)]||{}).a&&e.d.push(r)};var o=(e,o)=>{const i=n(e,o);if(!e.t[i].a)return i;const a=e.c.get(o);if(void 0!==a)return a._;e.u[i]=e.u[i]||[],e.u[i].push(void 0);const d=e.u[i].length-1,c={y:i,f:d,_:i+d,l:o,e:[],n:[]};e.c.set(o,c),e.t[i].s&&e.A.push(c);const _=r(o);let u=_.e;const y=_.n;return e.t[i].b&&(u=[]),c.e=u,c.n=y,u.forEach(r=>{t(e,r)}),y.forEach(r=>{t(e,r[0]),t(e,r[1])}),c._},i=e=>({o:r=>r===e,p:e}),a=i(void 0),d=i(null),c={o:e=>e!=e,p:NaN},_=i(1/0),u=i(-1/0),y={o:e=>0===e&&1/e==-1/0,p:-0},f=i(!0),l=i(!1),s=(r,n)=>({o:t=>e(t)===r&&!(t instanceof n),g:(e,r)=>r.l,w:(e,r,n)=>e.S[r][n],a:()=>{}}),A=s("Number",Number),b=Object.assign({b:1},s("String",String)),p=e=>({y:e.substring(0,2),f:parseInt(e.substring(2),10)}),g=(e,r)=>{if(e.t[r])return e.t[r].p;const n=p(r);return e.t[n.y].w(e,n.y,n.f)},E=r=>n=>e(n)===r,w={o:E("Symbol"),g:(e,r)=>{const n=Symbol.keyFor(r.l),t=void 0!==n;return[o(e,t?1:0),o(e,t?n:String(r.l).slice(7,-1))]},w:(e,r,n)=>{const t=e.S[r][n],o=g(e,t[1]);return 1===g(e,t[0])?Symbol.for(o):Symbol(o)},a:()=>{}},S=(e,r)=>[r.e.map(r=>o(e,r))],R=(e,r)=>{if(e.t[r])return e.t[r].p;const n=p(r);if(e.t[n.y])return e.R[r].l;if(e.i)return r;throw new Error(`Cannot decode unrecognized pointer type "${n.y}".`)},U=(e,r,n)=>{n.forEach(n=>{r.l[R(e,n[0])]=R(e,n[1])})},v=(e,r)=>{U(e,r,r.U.slice(1))},m=(e,r)=>({o:E(e),g:S,w:r,a:(e,r)=>{r.U[0].forEach((n,t)=>{r.l[t]=R(e,n)}),v(e,r)}}),I=m("Array",()=>[]),F=m("Arguments",(e,r,n)=>(function(){return arguments}).apply(null,Array(e.S[r][n][0].length))),B={o:E("Object"),g:()=>[],w:()=>({}),a:(e,r)=>{U(e,r,r.U)}},h=(r,n)=>({o:t=>e(t)===r&&t instanceof n,g:(e,r)=>[o(e,r.l.valueOf())],w:(e,r,t)=>new n(g(e,e.S[r][t][0])),a:v}),x=h("Boolean",Boolean),O=h("Number",Number),j=Object.assign({b:1},h("String",String)),V=h("Date",Date),M=(e,r,n)=>({o:E(e),g:r,w:n,a:v}),N=M("RegExp",(e,r)=>[[o(e,r.l.source),o(e,r.l.flags),o(e,r.l.lastIndex)]],(e,r,n)=>{const t=e.S[r][n][0],o=new RegExp(g(e,t[0]),g(e,t[1]));return o.lastIndex=g(e,t[2]),o});const C={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var k=M("Error",(e,r)=>[[o(e,C[r.l.name]?r.l.name:"Error"),o(e,r.l.message),o(e,r.l.stack)]],(e,r,n)=>{const t=e.S[r][n][0],o=new(C[g(e,t[0])]||Error)(g(e,t[1]));return o.stack=g(e,t[2]),o}),T=(e,r)=>({o:E(e),g:(e,r)=>(r.e=Array.from(new Uint8Array(r.l)),S(e,r)),w:(e,n,t)=>{const o=e.S[n][t][0],i=new r(o.length),a=new Uint8Array(i);return o.forEach((r,n)=>{a[n]=g(e,r)}),i},a:v}),$=T("ArrayBuffer",ArrayBuffer),z=T("SharedArrayBuffer",SharedArrayBuffer),D=(e,r)=>m(e,(e,n,t)=>new r(e.S[n][t][0].length)),q=D("Int8Array",Int8Array),G=D("Uint8Array",Uint8Array),H=D("Uint8ClampedArray",Uint8ClampedArray),J=D("Int16Array",Int16Array),K=D("Uint16Array",Uint16Array),L=D("Int32Array",Int32Array),P=D("Uint32Array",Uint32Array),Q=D("Float32Array",Float32Array),W=D("Float64Array",Float64Array),X=(e,r,n,t)=>({o:E(e),g:(e,r)=>[Array.from(r.l).map(r=>n(e,r))],w:()=>new r,a:(e,r)=>{r.U[0].forEach(n=>{t(e,r.l,n)}),v(e,r)}}),Y=X("Set",Set,(e,r)=>o(e,r),(e,r,n)=>{r.add(R(e,n))}),Z=X("Map",Map,(e,r)=>[o(e,r[0]),o(e,r[1])],(e,r,n)=>{r.set(R(e,n[0]),R(e,n[1]))}),ee=(e,r,n)=>({o:E(e),g:(e,n)=>[[new Uint8Array(0)].concat(r.map(r=>o(e,n.l[r])))],s:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{const i=new Uint8Array(t.result),a=o(e,i),d=p(a);e.u[d.y][d.f]=[Array.from(i).map(r=>{const n=o(e,r),t=p(n);return e.u[t.y][t.f]=r,n})],e.u[r.y][r.f][0][0]=a,n()}),t.readAsArrayBuffer(r.l)},w:(e,r,t)=>{const o=e.S[r][t][0],i=p(o[0]);return n(e,[new Uint8Array(e.S[i.y][i.f][0].map(r=>g(e,r)))],o)},a:v}),re=ee("Blob",["type"],(e,r,n)=>new Blob(r,{type:g(e,n[1])})),ne=ee("File",["name","type","lastModified"],(e,r,n)=>new File(r,g(e,n[1]),{type:g(e,n[2]),lastModified:g(e,n[3])}));const te={un:a,nl:d,na:c,pI:_,nI:u,n0:y,bt:f,bf:l,nm:A,st:b,sy:w,ar:I,ag:F,ob:B,BO:x,NM:O,ST:j,da:V,re:N,er:k,AB:$,SA:z,I1:q,U1:G,C1:H,I2:J,U2:K,I3:L,U3:P,F3:Q,F4:W,Se:Y,Ma:Z,Bl:re,Fi:ne},oe=(r,n)=>{r.u.r=n,r.u.v="1.0.0";const t=Object.keys(r.u).map(e=>[e,r.u[e]]);if("Function"!==e(r.m))return t;r.m(t)};var ie=(r,n)=>{const t={i:(n=n||{}).safeMode,m:n.onFinish,t:te,c:new Map,d:[],A:[],u:{}},i=o(t,r);if(te[i])return oe(t,i);for(t.d.push(r);t.d.length;)o(t,t.d.shift());if(t.c.forEach(e=>{t.u[e.y][e.f]=te[e.y].g(t,e),e.n.length>0&&(t.u[e.y][e.f]=t.u[e.y][e.f].concat(e.n.map(e=>[o(t,e[0]),o(t,e[1])])))}),!(t.A.length>0))return oe(t,i);{if("Function"!==e(n.onFinish)){if(t.i)return oe(t,i);throw new Error("Found deferred type, but no onFinish option provided.")}let r=t.A.length;const o=()=>{if(0===(r-=1))return oe(t,i)};t.A.forEach(e=>{te[e.y].s(t,e,o)})}};const ae=(r,n)=>{"Array"===e(n)?n.forEach(e=>{ae(r,e)}):r.d.push(n)},de=(r,n)=>{const t=p(n);!te[n]&&te[t.y]&&void 0===r.R[n]&&(r.R[n]={y:t.y,f:t.f,_:n,l:void 0,U:r.S[t.y][t.f]},r.R[n].l=te[t.y].w(r,t.y,t.f),"Array"===e(r.R[n].U)&&ae(r,r.R[n].U))};var ce=(e,r)=>{const n={i:(r=r||{}).safeMode,t:te,S:e.reduce((e,r)=>(e[r[0]]=r[1],e),{}),R:{},d:[]},t=n.S.r;if(te[t])return te[t].p;const o=p(t);if(!te[o.y]){if(n.i)return t;throw new Error(`Cannot decode unrecognized pointer type "${o.y}".`)}for(n.d.push(t);n.d.length;)de(n,n.d.shift());return Object.values(n.R).forEach(e=>{te[e.y].a(n,e)}),n.R[t].l},_e={encode:ie,decode:ce};export default _e;