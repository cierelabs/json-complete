var e=(e,r,n)=>{const t=new Error(e);return t.operation=r,t.type=n,t},r=e=>Object.prototype.toString.call(e).slice(8,-1);const n={Boolean:"Bo",Number:"NU",String:"ST"};var t=(e,t)=>{if(void 0===t)return"un";if(null===t)return"nl";if(!0===t)return"tr";if(!1===t)return"fa";if("number"==typeof t){if(t===1/0)return"pI";if(t===-1/0)return"nI";if(t!=t)return"Na";if(0===t&&1/t==-1/0)return"n0"}const o=r(t);return"object"==typeof t&&n[o]?n[o]:Object.keys(e).find(r=>o===e[r].e)};const o=(e,r)=>{const n=[],t={};Array.prototype.forEach.call(e,(e,r)=>{t[String(r)]=1,n.push(r)});let o=0,a=Object.keys(e).filter(e=>!t[e]);return r&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(e=>Symbol[String(e).slice(14,-1)]!==e))),n.concat(a).reduce((r,n)=>(n===o?(o+=1,r.n.push(e[n])):r.t.push([n,e[n]]),r),{n:[],t:[]})},a=(n,o)=>{const a=t(n.o,o);if(!a&&!n.a){const n=r(o);throw e(`Cannot encode unsupported type "${n}".`,"encode",n)}return a||"Ob"},c=(e,r)=>{e.o[a(e,r)].c&&e.u.push(r)};var u=(e,r)=>{const n=a(e,r);if(!e.o[n].c)return n;const t=e.f.i(r,n);if(void 0!==t)return t._;e.y[n]=e.y[n]||[],e.y[n].push(void 0);const u=e.y[n].length-1,i=o(r,e.d),f={s:n,l:u,_:n+u,p:r,n:e.o[n].m?[]:i.n,t:i.t};return e.f.b(r,f),e.o[n].g&&e.A.push(f),f.n.forEach(r=>{c(e,r)}),f.t.forEach(r=>{c(e,r[0]),c(e,r[1])}),f._};const i=e=>{if("function"!=typeof Map||"Map"!==r(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==r(Symbol())||!e)return!0;const n={};n[Symbol()]=1;const t=new Map;for(let e=0;e<50;e+=1)t.set(Object.getOwnPropertySymbols(n)[0],{});return 1===t.size};var f=e=>{if(i(e)){const e=new Map;return{i:r=>e.get(r),b(r,n){e.get(r)||e.set(r,n)},w(r){e.forEach(r)}}}const r=[],n=[],t=e=>{for(let t=0;t<r.length;t+=1)if(r[t]===e)return n[t]};return{i:t,b(e,o){t(e)||(r.push(e),n.push(o))},w(e){for(let r=0;r<n.length;r+=1)e(n[r])}}},_=(e,r)=>[r.n.map(r=>u(e,r))],y=e=>({s:e.slice(0,2),l:Number(e.slice(2))}),d=(e,r)=>{if(e.o[r])return e.o[r].S;const n=y(r);return e.o[n.s]?e.R[r].p:r},s=(e,r,n)=>{n.forEach(n=>{r.p[d(e,n[0])]=d(e,n[1])})},l=(e,r)=>{s(e,r,r.N.slice(1))},p=(e,r)=>{if(e.o[r])return e.o[r].S;const n=y(r);return e.o[n.s].h(e,n.s,n.l)};const m=e=>({e:r(new e),V:(e,r)=>(r.n=Array.prototype.slice.call(new Uint8Array(r.p)),_(e,r)),h:(r,n,t)=>{const o=r.B[n][t][0],a=new e(o.length),c=new Uint8Array(a);return o.forEach((e,n)=>{c[n]=p(r,e)}),a},c:l});var b=e=>("function"==typeof ArrayBuffer&&(e.AB=m(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(e.Sh=m(SharedArrayBuffer)),e),g=(e,r)=>{r.N[0].forEach((n,t)=>{r.p[t]=d(e,n)}),l(e,r)},v=e=>(e.Ar={e:"Array",V:_,h:()=>[],c:g},e.rg={e:"Arguments",V:_,h:(e,r,n)=>(function(){return arguments}).apply(null,Array(e.B[r][n][0].length)),c:g},e),A=e=>({e:r(e("")),V:(e,r)=>String(r.p),h:(r,n,t)=>e(r.B[n][t]),c:()=>{}}),w=e=>(e.St=A(String),e.St.m=1,e.Nu=A(Number),e),S=e=>("function"==typeof BigInt&&(e.Bi=A(BigInt)),e);const E=(e,r,n)=>({e:e,g:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{r.U=u(e,new Uint8Array(t.result)),n()}),t.readAsArrayBuffer(r.p)},V:(e,n)=>[[n.U].concat(r.map(r=>u(e,n.p[r])))],h:(e,r,t)=>{const o=e.B[r][t][0],a=y(o[0]);return n(e,[new Uint8Array(e.B[a.s][a.l][0].map(r=>p(e,r)))],o)},c:l});var R=e=>("function"==typeof Blob&&(e.Bl=E("Blob",["type"],(e,r,n)=>new Blob(r,{type:p(e,n[1])}))),"function"==typeof File&&(e.Fi=E("File",["name","type","lastModified"],(e,r,n)=>{try{return new File(r,p(e,n[1]),{type:p(e,n[2]),lastModified:p(e,n[3])})}catch(e){console.log(e.message)}})),e),N=e=>(e.Da={e:"Date",V:(e,r)=>[u(e,r.p.valueOf())],h:(e,r,n)=>new Date(p(e,e.B[r][n][0])),c:l},e);const h={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var V=e=>(e.Er={e:"Error",V:(e,r)=>[[u(e,h[r.p.name]?r.p.name:"Error"),u(e,r.p.message),u(e,r.p.stack)]],h:(e,r,n)=>{const t=e.B[r][n][0],o=new(h[p(e,t[0])]||Error)(p(e,t[1]));return o.stack=p(e,t[2]),o},c:l},e),B=e=>("function"==typeof Set&&(e.Se={e:"Set",V:(e,r)=>[Array.from(r.p).map(r=>u(e,r))],h:()=>new Set,c:(e,r)=>{r.N[0].forEach(n=>{r.p.add(d(e,n))}),l(e,r)}},e.Ma={e:"Map",V:(e,r)=>[Array.from(r.p).map(r=>[u(e,r[0]),u(e,r[1])])],h:()=>new Map,c:(e,r)=>{r.N[0].forEach(n=>{r.p.set(d(e,n[0]),d(e,n[1]))}),l(e,r)}}),e),U=e=>(e.Ob={e:"Object",V:()=>[],h:()=>({}),c:(e,r)=>{s(e,r,r.N)}},e),j=e=>(e.Re={e:"RegExp",V:(e,r)=>{const n=r.p;return[[u(e,n.source),u(e,void 0===n.flags?n.options:n.flags),u(e,n.lastIndex)]]},h:(e,r,n)=>{const t=e.B[r][n][0],o=new RegExp(p(e,t[0]),p(e,t[1]));return o.lastIndex=p(e,t[2]),o},c:l},e),x=e=>(e.un={S:void 0},e.nl={S:null},e.tr={S:!0},e.fa={S:!1},e.pI={S:1/0},e.nI={S:-1/0},e.Na={S:NaN},e.n0={S:-0},e),F=e=>("function"==typeof Symbol&&(e.Sy={e:"Symbol",V:(e,r)=>{const n=Symbol.keyFor(r.p),t=void 0!==n;return[u(e,!!t),u(e,t?n:String(r.p).slice(7,-1))]},h:(e,r,n)=>{const t=e.B[r][n],o=p(e,t[1]);return p(e,t[0])?Symbol.for(o):Symbol(o)},c:()=>{}}),e);const I=e=>({e:r(new e),V:_,h:(r,n,t)=>new e(r.B[n][t][0].length),c:g});var M=e=>("function"==typeof Int8Array&&(e.I1=I(Int8Array),e.I2=I(Int16Array),e.I3=I(Int32Array),e.U1=I(Uint8Array),e.U2=I(Uint16Array),e.U3=I(Uint32Array),e.F3=I(Float32Array)),"function"==typeof Uint8ClampedArray&&(e.C1=I(Uint8ClampedArray)),"function"==typeof Float64Array&&(e.F4=I(Float64Array)),e);const O=e=>({e:"",V:(e,r)=>[u(e,r.p.valueOf())],h:(r,n,t)=>new e(p(r,r.B[n][t][0])),c:l});var C=e=>(e.Bo=O(Boolean),e.NU=O(Number),e.ST=O(String),e.ST.m=1,e);let $={};var k=$=S($=R($=b($=M($=B($=F($=V($=j($=N($=U($=v($=C($=w($=x($))))))))))))));const z=(e,r)=>{e.f.w(r=>{e.y[r.s][r.l]=k[r.s].V(e,r),r.t.length>0&&(e.y[r.s][r.l]=e.y[r.s][r.l].concat(r.t.map(r=>[u(e,r[0]),u(e,r[1])])))}),e.y.r=r,e.y.v="1.0.0";const n=Object.keys(e.y).map(r=>[r,e.y[r]]);if("function"!=typeof e.j)return n;e.j(n)};var T=(r,n)=>{const t={a:(n=n||{}).safeMode,d:n.encodeSymbolKeys,j:n.onFinish,o:k,f:f(n.encodeSymbolKeys),u:[],A:[],y:{}},o=u(t,r);if(k[o])return z(t,o);for(t.u.push(r);t.u.length;)u(t,t.u.shift());if(!(t.A.length>0))return z(t,o);{if("function"!=typeof n.onFinish){if(t.a)return z(t,o);throw e("Found deferred type, but no onFinish option provided.","encode")}let r=t.A.length;const a=()=>{if(0===(r-=1))return z(t,o)};t.A.forEach(e=>{k[e.s].g(t,e,a)})}};const D=(e,n)=>{"Array"===r(n)?n.forEach(r=>{D(e,r)}):e.u.push(n)},K=(n,t)=>{const o=y(t);if(!k[o.s]){if(n.a)return;throw e(`Cannot decode unrecognized pointer type "${o.s}".`,"decode",o.s)}if(!k[t]&&void 0===n.R[t]){n.R[t]={s:o.s,l:o.l,_:t,p:void 0,N:n.B[o.s][o.l]};try{n.R[t].p=k[o.s].h(n,o.s,o.l)}catch(r){throw e(`Cannot generate recognized object type from pointer type "${o.s}".`,"decode")}"Array"===r(n.R[t].N)&&D(n,n.R[t].N)}};var q=(r,n)=>{const t={a:(n=n||{}).safeMode,o:k,B:r.reduce((e,r)=>(e[r[0]]=r[1],e),{}),R:{},u:[]},o=t.B.r;if(k[o])return k[o].S;const a=y(o);if(!k[a.s]){if(t.a)return o;throw e(`Cannot decode unrecognized pointer type "${a.s}".`,"decode",a.s)}for(t.u.push(o);t.u.length;)K(t,t.u.shift());return Object.values(t.R).forEach(e=>{k[e.s].c(t,e)}),t.R[o].p},G={encode:T,decode:q};export default G;