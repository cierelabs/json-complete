var e=(e,r,n)=>{const t=new Error(e);return t.operation=r,t.type=n,t},r=e=>Object.prototype.toString.call(e).slice(8,-1);const n=(e,r)=>{const n=[],t={};Array.prototype.forEach.call(e,(e,r)=>{t[String(r)]=1,n.push(r)});let o=0,a=Object.keys(e).filter(e=>!t[e]);return r&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(e=>Symbol[String(e).slice(14,-1)]!==e))),n.concat(a).reduce((r,n)=>(n===o?(o+=1,r.e.push(e[n])):r.n.push([n,e[n]]),r),{e:[],n:[]})},t={Boolean:"Bo",Number:"NU",String:"ST"},o=(e,n)=>{if(void 0===n)return"un";if(null===n)return"nl";if(!0===n)return"tr";if(!1===n)return"fa";if("number"==typeof n){if(n===1/0)return"pI";if(n===-1/0)return"nI";if(n!=n)return"Na";if(0===n&&1/n==-1/0)return"n0"}const o=r(n);return"object"==typeof n&&t[o]?t[o]:Object.keys(e).find(r=>o===e[r].t)},a=(n,t)=>{const a=o(n.o,t);if(!a&&!n.a){const n=r(t);throw e(`Cannot encode unsupported type "${n}".`,"encode",n)}return a||"Ob"},c=(e,r)=>{e.o[a(e,r)].c&&e.i.push(r)};var i=(e,r)=>{const t=a(e,r);if(!e.o[t].c)return t;const o=e.u.get(r);if(void 0!==o)return o._;e.d[t]=e.d[t]||[],e.d[t].push(void 0);const i=e.d[t].length-1,u=n(r,e.f),_={y:t,s:i,_:t+i,l:r,e:e.o[t].p?[]:u.e,n:u.n};return e.u.set(r,_),e.o[t].m&&e.b.push(_),_.e.forEach(r=>{c(e,r)}),_.n.forEach(r=>{c(e,r[0]),c(e,r[1])}),_._},u=(e,r)=>[r.e.map(r=>i(e,r))],_=e=>({y:e.slice(0,2),s:parseInt(e.slice(2),10)}),d=(e,r)=>{if(e.o[r])return e.o[r].g;const n=_(r);return e.o[n.y]?e.A[r].l:r},f=(e,r,n)=>{n.forEach(n=>{r.l[d(e,n[0])]=d(e,n[1])})},y=(e,r)=>{f(e,r,r.R.slice(1))},s=(e,r)=>{if(e.o[r])return e.o[r].g;const n=_(r);return e.o[n.y].w(e,n.y,n.s)};const l=e=>({t:r(new e),N:(e,r)=>(r.e=Array.prototype.slice.call(new Uint8Array(r.l)),u(e,r)),w:(r,n,t)=>{const o=r.S[n][t][0],a=new e(o.length),c=new Uint8Array(a);return o.forEach((e,n)=>{c[n]=s(r,e)}),a},c:y});var p=e=>("function"==typeof ArrayBuffer&&(e.AB=l(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(e.Sh=l(SharedArrayBuffer)),e),m=(e,r)=>{r.R[0].forEach((n,t)=>{r.l[t]=d(e,n)}),y(e,r)},b=e=>(e.Ar={t:"Array",N:u,w:()=>[],c:m},e.rg={t:"Arguments",N:u,w:(e,r,n)=>(function(){return arguments}).apply(null,Array(e.S[r][n][0].length)),c:m},e),g=e=>(e.St={p:1,t:"String",N:(e,r)=>r.l,w:(e,r,n)=>e.S[r][n],c:()=>{}},e.Nu={t:"Number",N:(e,r)=>i(e,String(r.l)),w:(e,r,n)=>parseFloat(s(e,e.S[r][n])),c:()=>{}},e),v=e=>("function"==typeof BigInt&&(e.Bi={t:"BigInt",N:(e,r)=>i(e,String(r.l)),w:(e,r,n)=>BigInt(s(e,e.S[r][n])),c:()=>{}}),e);const A=(e,r,n)=>({t:e,m:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{r.V=i(e,new Uint8Array(t.result)),n()}),t.readAsArrayBuffer(r.l)},N:(e,n)=>[[n.V].concat(r.map(r=>i(e,n.l[r])))],w:(e,r,t)=>{const o=e.S[r][t][0],a=_(o[0]);return n(e,[new Uint8Array(e.S[a.y][a.s][0].map(r=>s(e,r)))],o)},c:y});var R=e=>("function"==typeof Blob&&(e.Bl=A("Blob",["type"],(e,r,n)=>new Blob(r,{type:s(e,n[1])}))),"function"==typeof File&&(e.Fi=A("File",["name","type","lastModified"],(e,r,n)=>new File(r,s(e,n[1]),{type:s(e,n[2]),lastModified:s(e,n[3])}))),e),w=e=>(e.Da={t:"Date",N:(e,r)=>[i(e,r.l.valueOf())],w:(e,r,n)=>new Date(s(e,e.S[r][n][0])),c:y},e);const N={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var S=e=>(e.Er={t:"Error",N:(e,r)=>[[i(e,N[r.l.name]?r.l.name:"Error"),i(e,r.l.message),i(e,r.l.stack)]],w:(e,r,n)=>{const t=e.S[r][n][0],o=new(N[s(e,t[0])]||Error)(s(e,t[1]));return o.stack=s(e,t[2]),o},c:y},e),E=e=>("function"==typeof Set&&(e.Se={t:"Set",N:(e,r)=>[Array.from(r.l).map(r=>i(e,r))],w:()=>new Set,c:(e,r)=>{r.R[0].forEach(n=>{r.l.add(d(e,n))}),y(e,r)}},e.Ma={t:"Map",N:(e,r)=>[Array.from(r.l).map(r=>[i(e,r[0]),i(e,r[1])])],w:()=>new Map,c:(e,r)=>{r.R[0].forEach(n=>{r.l.set(d(e,n[0]),d(e,n[1]))}),y(e,r)}}),e),V=e=>(e.Ob={t:"Object",N:()=>[],w:()=>({}),c:(e,r)=>{f(e,r,r.R)}},e),B=e=>(e.Re={t:"RegExp",N:(e,r)=>{const n=r.l;return[[i(e,n.source),i(e,void 0===n.flags?n.options:n.flags),i(e,n.lastIndex)]]},w:(e,r,n)=>{const t=e.S[r][n][0],o=new RegExp(s(e,t[0]),s(e,t[1]));return o.lastIndex=s(e,t[2]),o},c:y},e),I=e=>(e.un={g:void 0},e.nl={g:null},e.tr={g:!0},e.fa={g:!1},e.pI={g:1/0},e.nI={g:-1/0},e.Na={g:NaN},e.n0={g:-0},e),h=e=>("function"==typeof Symbol&&(e.Sy={t:"Symbol",N:(e,r)=>{const n=Symbol.keyFor(r.l),t=void 0!==n;return[i(e,!!t),i(e,t?n:String(r.l).slice(7,-1))]},w:(e,r,n)=>{const t=e.S[r][n],o=s(e,t[1]);return s(e,t[0])?Symbol.for(o):Symbol(o)},c:()=>{}}),e);const U=e=>({t:r(new e),N:u,w:(r,n,t)=>new e(r.S[n][t][0].length),c:m});var F=e=>("function"==typeof Int8Array&&(e.I1=U(Int8Array),e.I2=U(Int16Array),e.I3=U(Int32Array),e.U1=U(Uint8Array),e.U2=U(Uint16Array),e.U3=U(Uint32Array),e.F3=U(Float32Array)),"function"==typeof Uint8ClampedArray&&(e.C1=U(Uint8ClampedArray)),"function"==typeof Float64Array&&(e.F4=U(Float64Array)),e);const x=e=>({t:"",N:(e,r)=>[i(e,r.l.valueOf())],w:(r,n,t)=>new e(s(r,r.S[n][t][0])),c:y});var j=e=>(e.Bo=x(Boolean),e.NU=x(Number),e.ST=x(String),e.ST.p=1,e);let O={};var C=O=v(O=R(O=p(O=F(O=E(O=h(O=S(O=B(O=w(O=V(O=b(O=j(O=g(O=I(O))))))))))))));const M=(e,r)=>{e.u.forEach(r=>{e.d[r.y][r.s]=C[r.y].N(e,r),r.n.length>0&&(e.d[r.y][r.s]=e.d[r.y][r.s].concat(r.n.map(r=>[i(e,r[0]),i(e,r[1])])))}),e.d.r=r,e.d.v="1.0.0";const n=Object.keys(e.d).map(r=>[r,e.d[r]]);if("function"!=typeof e.B)return n;e.B(n)};var $=(r,n)=>{const t={a:(n=n||{}).safeMode,f:n.encodeSymbolKeys,B:n.onFinish,o:C,u:new Map,i:[],b:[],d:{}},o=i(t,r);if(C[o])return M(t,o);for(t.i.push(r);t.i.length;)i(t,t.i.shift());if(!(t.b.length>0))return M(t,o);{if("function"!=typeof n.onFinish){if(t.a)return M(t,o);throw e("Found deferred type, but no onFinish option provided.","encode")}let r=t.b.length;const a=()=>{if(0===(r-=1))return M(t,o)};t.b.forEach(e=>{C[e.y].m(t,e,a)})}};const k=(e,n)=>{"Array"===r(n)?n.forEach(r=>{k(e,r)}):e.i.push(n)},z=(n,t)=>{const o=_(t);if(!C[o.y]){if(n.a)return;throw e(`Cannot decode unrecognized pointer type "${o.y}".`,"decode",o.y)}if(!C[t]&&void 0===n.A[t]){n.A[t]={y:o.y,s:o.s,_:t,l:void 0,R:n.S[o.y][o.s]};try{n.A[t].l=C[o.y].w(n,o.y,o.s)}catch(r){throw e(`Cannot generate recognized object type from pointer type "${o.y}".`,"decode")}"Array"===r(n.A[t].R)&&k(n,n.A[t].R)}};var T=(r,n)=>{const t={a:(n=n||{}).safeMode,o:C,S:r.reduce((e,r)=>(e[r[0]]=r[1],e),{}),A:{},i:[]},o=t.S.r;if(C[o])return C[o].g;const a=_(o);if(!C[a.y]){if(t.a)return o;throw e(`Cannot decode unrecognized pointer type "${a.y}".`,"decode",a.y)}for(t.i.push(o);t.i.length;)z(t,t.i.shift());return Object.values(t.A).forEach(e=>{C[e.y].c(t,e)}),t.A[o].l},D={encode:$,decode:T};export default D;