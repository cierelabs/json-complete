"use strict";var n=function(n){return Object.prototype.toString.call(n).slice(8,-1)},r=function(n){var r=[],e={};Array.prototype.forEach.call(n,function(n,t){e[String(t)]=1,r.push(t)});var t=0,u=Object.keys(n).filter(function(n){return!e[n]}).concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n}));return r.concat(u).reduce(function(r,e){return e===t?(t+=1,r.n.push(n[e])):r.e.push([e,n[e]]),r},{n:[],e:[]})},e=function(r,e){var t=Object.keys(r.t).find(function(n){return r.t[n].u(e)});if(!t&&!r.i)throw new Error('Cannot encode unsupported type "'.concat(n(e),'".'));return t||"ob"},t=function(n,r){(n.t[e(n,r)]||{}).o&&n.f.push(r)},u=function(n,u){var i=e(n,u);if(!n.t[i].o)return i;var o=n.c.get(u);if(void 0!==o)return o.a;n.d[i]=n.d[i]||[],n.d[i].push(void 0);var f=n.d[i].length-1,c={_:i,y:f,a:i+f,l:u,n:[],e:[]};n.c.set(u,c),n.t[i].A&&n.b.push(c);var a=r(u),d=a.n,_=a.e;return n.t[i].p&&(d=[]),c.n=d,c.e=_,d.forEach(function(r){t(n,r)}),_.forEach(function(r){t(n,r[0]),t(n,r[1])}),c.a},i=function(n){return{u:function(r){return r===n},g:n}},o=i(void 0),f=i(null),c={u:function(n){return n!=n},g:NaN},a=i(1/0),d=i(-1/0),_={u:function(n){return 0===n&&1/n==-1/0},g:-0},y=i(!0),l=i(!1),A=function(r,e){return{u:function(t){return n(t)===r&&!(t instanceof e)},s:function(n,r){return r.l},w:function(n,r,e){return n.S[r][e]},o:function(){}}},v=A("Number",Number),b=Object.assign({p:1},A("String",String)),p=function(n){return{_:n.substring(0,2),y:parseInt(n.substring(2),10)}},g=function(n,r){if(n.t[r])return n.t[r].g;var e=p(r);return n.t[e._].w(n,e._,e.y)},s=function(r){return function(e){return n(e)===r}},E={u:s("Symbol"),s:function(n,r){var e=Symbol.keyFor(r.l),t=void 0!==e;return[u(n,t?1:0),u(n,t?e:String(r.l).slice(7,-1))]},w:function(n,r,e){var t=n.S[r][e],u=g(n,t[1]);return 1===g(n,t[0])?Symbol.for(u):Symbol(u)},o:function(){}},w=function(n,r){return[r.n.map(function(r){return u(n,r)})]},S=function(n,r){if(n.t[r])return n.t[r].g;var e=p(r);if(n.t[e._])return n.R[r].l;if(n.i)return r;throw new Error('Cannot decode unrecognized pointer type "'.concat(e._,'".'))},R=function(n,r,e){e.forEach(function(e){r.l[S(n,e[0])]=S(n,e[1])})},U=function(n,r){R(n,r,r.U.slice(1))},m=function(n,r){return{u:s(n),s:w,w:r,o:function(n,r){r.U[0].forEach(function(e,t){r.l[t]=S(n,e)}),U(n,r)}}},I=m("Array",function(){return[]}),F=m("Arguments",function(n,r,e){return function(){return arguments}.apply(null,Array(n.S[r][e][0].length))}),B={u:s("Object"),s:function(){return[]},w:function(){return{}},o:function(n,r){R(n,r,r.U)}},h=function(r,e){return{u:function(t){return n(t)===r&&t instanceof e},s:function(n,r){return[u(n,r.l.valueOf())]},w:function(n,r,t){return new e(g(n,n.S[r][t][0]))},o:U}},O=h("Boolean",Boolean),j=h("Number",Number),x=Object.assign({p:1},h("String",String)),V=h("Date",Date),M=function(n,r,e){return{u:s(n),s:r,w:e,o:U}},N=M("RegExp",function(n,r){return[[u(n,r.l.source),u(n,r.l.flags),u(n,r.l.lastIndex)]]},function(n,r,e){var t=n.S[r][e][0],u=new RegExp(g(n,t[0]),g(n,t[1]));return u.lastIndex=g(n,t[2]),u}),C={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},k=M("Error",function(n,r){return[[u(n,C[r.l.name]?r.l.name:"Error"),u(n,r.l.message),u(n,r.l.stack)]]},function(n,r,e){var t=n.S[r][e][0],u=new(C[g(n,t[0])]||Error)(g(n,t[1]));return u.stack=g(n,t[2]),u}),T=function(n,r){return{u:s(n),s:function(n,r){return r.n=Array.from(new Uint8Array(r.l)),w(n,r)},w:function(n,e,t){var u=n.S[e][t][0],i=new r(u.length),o=new Uint8Array(i);return u.forEach(function(r,e){o[e]=g(n,r)}),i},o:U}},z=T("ArrayBuffer",ArrayBuffer),D=T("SharedArrayBuffer",SharedArrayBuffer),q=function(n,r){return m(n,function(n,e,t){return new r(n.S[e][t][0].length)})},G=q("Int8Array",Int8Array),H=q("Uint8Array",Uint8Array),J=q("Uint8ClampedArray",Uint8ClampedArray),K=q("Int16Array",Int16Array),L=q("Uint16Array",Uint16Array),P=q("Int32Array",Int32Array),Q=q("Uint32Array",Uint32Array),W=q("Float32Array",Float32Array),X=q("Float64Array",Float64Array),Y=function(n,r,e,t){return{u:s(n),s:function(n,r){return[Array.from(r.l).map(function(r){return e(n,r)})]},w:function(){return new r},o:function(n,r){r.U[0].forEach(function(e){t(n,r.l,e)}),U(n,r)}}},Z=Y("Set",Set,function(n,r){return u(n,r)},function(n,r,e){r.add(S(n,e))}),$=Y("Map",Map,function(n,r){return[u(n,r[0]),u(n,r[1])]},function(n,r,e){r.set(S(n,e[0]),S(n,e[1]))}),nn=function(n,r,e){return{u:s(n),s:function(n,e){return[[new Uint8Array(0)].concat(r.map(function(r){return u(n,e.l[r])}))]},A:function(n,r,e){var t=new FileReader;t.addEventListener("loadend",function(){var i=new Uint8Array(t.result),o=u(n,i),f=p(o);n.d[f._][f.y]=[Array.from(i).map(function(r){var e=u(n,r),t=p(e);return n.d[t._][t.y]=r,e})],n.d[r._][r.y][0][0]=o,e()}),t.readAsArrayBuffer(r.l)},w:function(n,r,t){var u=n.S[r][t][0],i=p(u[0]);return e(n,[new Uint8Array(n.S[i._][i.y][0].map(function(r){return g(n,r)}))],u)},o:U}},rn=nn("Blob",["type"],function(n,r,e){return new Blob(r,{type:g(n,e[1])})}),en=nn("File",["name","type","lastModified"],function(n,r,e){return new File(r,g(n,e[1]),{type:g(n,e[2]),lastModified:g(n,e[3])})}),tn={un:o,nl:f,na:c,pI:a,nI:d,n0:_,bt:y,bf:l,nm:v,st:b,sy:E,ar:I,ag:F,ob:B,BO:O,NM:j,ST:x,da:V,re:N,er:k,AB:z,SA:D,I1:G,U1:H,C1:J,I2:K,U2:L,I3:P,U3:Q,F3:W,F4:X,Se:Z,Ma:$,Bl:rn,Fi:en},un=function(r,e){r.d.r=e,r.d.v="1.0.0";var t=Object.keys(r.d).map(function(n){return[n,r.d[n]]});if("Function"!==n(r.m))return t;r.m(t)},on=function(r,e){var t={i:(e=e||{}).safeMode,m:e.onFinish,t:tn,c:new Map,f:[],b:[],d:{}},i=u(t,r);if(tn[i])return un(t,i);for(t.f.push(r);t.f.length;)u(t,t.f.shift());if(t.c.forEach(function(n){t.d[n._][n.y]=tn[n._].s(t,n),n.e.length>0&&(t.d[n._][n.y]=t.d[n._][n.y].concat(n.e.map(function(n){return[u(t,n[0]),u(t,n[1])]})))}),!(t.b.length>0))return un(t,i);if("Function"!==n(e.onFinish)){if(t.i)return un(t,i);throw new Error("Found deferred type, but no onFinish option provided.")}var o=t.b.length,f=function(){if(0===(o-=1))return un(t,i)};t.b.forEach(function(n){tn[n._].A(t,n,f)})},fn=function r(e,t){"Array"===n(t)?t.forEach(function(n){r(e,n)}):e.f.push(t)},cn=function(r,e){var t=p(e);!tn[e]&&tn[t._]&&void 0===r.R[e]&&(r.R[e]={_:t._,y:t.y,a:e,l:void 0,U:r.S[t._][t.y]},r.R[e].l=tn[t._].w(r,t._,t.y),"Array"===n(r.R[e].U)&&fn(r,r.R[e].U))},an=function(n,r){var e={i:(r=r||{}).safeMode,t:tn,S:n.reduce(function(n,r){return n[r[0]]=r[1],n},{}),R:{},f:[]},t=e.S.r;if(tn[t])return tn[t].g;var u=p(t);if(!tn[u._]){if(e.i)return t;throw new Error('Cannot decode unrecognized pointer type "'.concat(u._,'".'))}for(e.f.push(t);e.f.length;)cn(e,e.f.shift());return Object.values(e.R).forEach(function(n){tn[n._].o(e,n)}),e.R[t].l},dn={encode:on,decode:an};module.exports=dn;