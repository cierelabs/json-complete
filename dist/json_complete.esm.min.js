var e=(e,r,n)=>{const t=new Error(e);return t.operation=r,t.type=n,t},r=e=>Object.prototype.toString.call(e).slice(8,-1),n=(e,n)=>{if(void 0===n)return"un";if(null===n)return"nl";if(!0===n)return"tr";if(!1===n)return"fa";if("number"==typeof n){if(n===1/0)return"pI";if(n===-1/0)return"nI";if(n!=n)return"Na";if(0===n&&1/n==-1/0)return"n0"}let t=r(n);const o=e.e[t];return o&&"object"==typeof n&&(t=o),e.n[t]};const t=(e,r)=>{const n=[],t={};Array.prototype.forEach.call(e,(e,r)=>{t[String(r)]=1,n.push(r)});let o=0,a=Object.keys(e).filter(e=>!t[e]);return r&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(e=>Symbol[String(e).slice(14,-1)]!==e))),n.concat(a).reduce((r,n)=>(n===o?(o+=1,r.t.push(e[n])):r.o.push([n,e[n]]),r),{t:[],o:[]})},o=(t,o)=>{const a=n(t,o);if(!a&&!t.a){const n=r(o);throw e(`Cannot encode unsupported type "${n}".`,"encode",n)}return a||"Ob"};var a=(e,r)=>{const n=o(e,r);if(!e.u[n].c)return n;const a=e._.i(r,n);if(void 0!==a)return a.f;e.y[n]=e.y[n]||[],e.y[n].push(void 0);const c=e.y[n].length-1,u=t(r,e.d),i={s:n,l:c,f:n+c,p:r,t:e.u[n].m?[]:u.t,o:u.o};return e._.b(r,i),e.u[n].g&&e.w.push(i),i.f};const c=e=>{if("function"!=typeof Map||"Map"!==r(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==r(Symbol())||!e)return!0;const n={};n[Symbol()]=1;const t=new Map;for(let e=0;e<50;e+=1)t.set(Object.getOwnPropertySymbols(n)[0],{});return 1===t.size};var u=e=>{if(c(e)){const e=new Map;return{i:r=>e.get(r),b:(r,n)=>{e.set(r,n)},A:(r,n)=>{n=n||0;let t=0;return e.forEach(e=>{t>=n&&r(e),t+=1}),t}}}const r=[],n=[];return{i:e=>{for(let t=0;t<r.length;t+=1)if(r[t]===e)return n[t]},b:(e,t)=>{r.push(e),n.push(t)},A:(e,r)=>{let t;for(t=r||0;t<n.length;t+=1)e(n[t]);return t}}},i=(e,r)=>[r.t.map(r=>a(e,r))],_=e=>({s:e.slice(0,2),l:Number(e.slice(2))}),f=(e,r)=>{if(e.u[r])return e.u[r].S;const n=_(r);return e.u[n.s]?e.R[r].p:r},y=(e,r,n)=>{n.forEach(n=>{r.p[f(e,n[0])]=f(e,n[1])})},d=(e,r)=>{y(e,r,r.N.slice(1))},s=(e,r)=>{if(e.u[r])return e.u[r].S;const n=_(r);return e.u[n.s].h(e,n.s,n.l)};const l=e=>({V:r(new e),F:(e,r)=>(r.t=Array.prototype.slice.call(new Uint8Array(r.p)),i(e,r)),h:(r,n,t)=>{const o=r.B[n][t][0],a=new e(o.length),c=new Uint8Array(a);return o.forEach((e,n)=>{c[n]=s(r,e)}),a},c:d});var p=e=>("function"==typeof ArrayBuffer&&(e.AB=l(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(e.Sh=l(SharedArrayBuffer)),e),m=(e,r)=>{r.N[0].forEach((n,t)=>{r.p[t]=f(e,n)}),d(e,r)},b=e=>(e.Ar={V:"Array",F:i,h:()=>[],c:m},e.rg={V:"Arguments",F:i,h:(e,r,n)=>(function(){return arguments}).apply(null,Array(e.B[r][n][0].length)),c:m},e),g=e=>({V:r(e("")),F:(e,r)=>String(r.p),h:(r,n,t)=>e(r.B[n][t]),c:()=>{}}),v=e=>(e.St=g(String),e.St.m=1,e.Nu=g(Number),e),w=e=>("function"==typeof BigInt&&(e.Bi=g(BigInt)),e);const A=(e,r,n)=>({V:e,F:(e,n)=>[[void 0].concat(r.map(r=>a(e,n.p[r])))],g:(e,r,n)=>{const t=new FileReader;t.addEventListener("loadend",()=>{e.y[r.s][r.l][0][0]=a(e,new Uint8Array(t.result)),n()}),t.readAsArrayBuffer(r.p)},h:(e,r,t)=>{const o=e.B[r][t][0],a=_(o[0]);return n(e,[new Uint8Array(e.B[a.s][a.l][0].map(r=>s(e,r)))],o)},c:d});var S=e=>("function"==typeof Blob&&(e.Bl=A("Blob",["type"],(e,r,n)=>new Blob(r,{type:s(e,n[1])}))),"function"==typeof File&&(e.Fi=A("File",["type","name","lastModified"],(e,r,n)=>{try{return new File(r,s(e,n[2]),{type:s(e,n[1]),lastModified:s(e,n[3])})}catch(t){if(e.a){const t=new Blob(r,{type:s(e,n[1])});return t.name=s(e,n[2]),t.lastModified=s(e,n[3]),t}throw t}})),e),E=e=>(e.Da={V:"Date",F:(e,r)=>[a(e,r.p.valueOf())],h:(e,r,n)=>new Date(s(e,e.B[r][n][0])),c:d},e);const R={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};var N=e=>(e.Er={V:"Error",F:(e,r)=>[[a(e,R[r.p.name]?r.p.name:"Error"),a(e,r.p.message),a(e,r.p.stack)]],h:(e,r,n)=>{const t=e.B[r][n][0],o=new(R[s(e,t[0])]||Error)(s(e,t[1]));return o.stack=s(e,t[2]),o},c:d},e),h=e=>("function"==typeof Set&&(e.Se={V:"Set",F:(e,r)=>[Array.from(r.p).map(r=>a(e,r))],h:()=>new Set,c:(e,r)=>{r.N[0].forEach(n=>{r.p.add(f(e,n))}),d(e,r)}},e.Ma={V:"Map",F:(e,r)=>[Array.from(r.p).map(r=>[a(e,r[0]),a(e,r[1])])],h:()=>new Map,c:(e,r)=>{r.N[0].forEach(n=>{r.p.set(f(e,n[0]),f(e,n[1]))}),d(e,r)}}),e),V=e=>(e.Ob={V:"Object",F:()=>[],h:()=>({}),c:(e,r)=>{y(e,r,r.N)}},e);const F=e=>void 0===e.flags?e.options:e.flags;var B=e=>(e.Re={V:"RegExp",F:(e,r)=>{const n=r.p;return[[a(e,n.source),a(e,F(n)),a(e,n.lastIndex)]]},h:(e,r,n)=>{const t=e.B[r][n][0],o=new RegExp(s(e,t[0]),s(e,t[1]));return o.lastIndex=s(e,t[2]),o},c:d},e),M=e=>(e.un={S:void 0},e.nl={S:null},e.tr={S:!0},e.fa={S:!1},e.pI={S:1/0},e.nI={S:-1/0},e.Na={S:NaN},e.n0={S:-0},e),U=e=>("function"==typeof Symbol&&(e.Sy={V:"Symbol",F:(e,r)=>{const n=Symbol.keyFor(r.p),t=void 0!==n;return[a(e,!!t),a(e,t?n:String(r.p).slice(7,-1))]},h:(e,r,n)=>{const t=e.B[r][n],o=s(e,t[1]);return s(e,t[0])?Symbol.for(o):Symbol(o)},c:()=>{}}),e);const j=e=>({V:r(new e),F:i,h:(r,n,t)=>new e(r.B[n][t][0].length),c:m});var I=e=>("function"==typeof Int8Array&&(e.I1=j(Int8Array),e.I2=j(Int16Array),e.I3=j(Int32Array),e.U1=j(Uint8Array),e.U2=j(Uint16Array),e.U3=j(Uint32Array),e.F3=j(Float32Array)),"function"==typeof Uint8ClampedArray&&(e.C1=j(Uint8ClampedArray)),"function"==typeof Float64Array&&(e.F4=j(Float64Array)),e);const x=e=>({V:`_${r(new e(""))}`,F:(e,r)=>[a(e,r.p.valueOf())],h:(r,n,t)=>new e(s(r,r.B[n][t][0])),c:d});var O=e=>(e.Bo=x(Boolean),e.NU=x(Number),e.ST=x(String),e.ST.m=1,e);let C={};var $=C=w(C=S(C=p(C=I(C=h(C=U(C=N(C=B(C=E(C=V(C=b(C=O(C=v(C=M(C))))))))))))));const k=(e,r)=>{e.y.r=r,e.y.v="1.0.0";const n=Object.keys(e.y).map(r=>[r,e.y[r]]);if("function"!=typeof e.M)return n;e.M(n)},z=(e,r)=>e._.A(r=>{e.y[r.s][r.l]=$[r.s].F(e,r),r.o.length>0&&(e.y[r.s][r.l]=e.y[r.s][r.l].concat(r.o.map(r=>[a(e,r[0]),a(e,r[1])])))},r);var T=(r,n)=>{n=n||{};let t={},o={};Object.keys($).forEach(e=>{const r=$[e].V;r&&(t[r]=e),"_"===(r||"")[0]&&(o[r.slice(1)]=r)});const c={a:n.compat,d:n.encodeSymbolKeys,M:n.onFinish,u:$,n:t,e:o,_:u(n.encodeSymbolKeys),w:[],y:{}},i=a(c,r),_=z(c);if(!(c.w.length>0))return k(c,i);{if("function"!=typeof n.onFinish){if(c.a)return k(c,i);throw e("Found deferred type, but no onFinish option provided.","encode")}let r=c.w.length;const t=()=>{if(0===(r-=1))return z(c,_),k(c,i)};c.w.forEach(e=>{$[e.s].g(c,e,t)})}};const D=(e,n)=>{"Array"===r(n)?n.forEach(r=>{D(e,r)}):e.U.push(n)},K=(n,t)=>{const o=_(t);if(!$[o.s]){if(n.a)return;throw e(`Cannot decode unrecognized pointer type "${o.s}".`,"decode",o.s)}if(!$[t]&&void 0===n.R[t]){n.R[t]={s:o.s,l:o.l,f:t,p:void 0,N:n.B[o.s][o.l]};try{n.R[t].p=$[o.s].h(n,o.s,o.l)}catch(r){throw e(`Cannot generate recognized object type from pointer type "${o.s}".`,"decode")}"Array"===r(n.R[t].N)&&D(n,n.R[t].N)}};var q=(r,n)=>{const t={a:(n=n||{}).compat,u:$,B:r.reduce((e,r)=>(e[r[0]]=r[1],e),{}),R:{},U:[]},o=t.B.r;if($[o])return $[o].S;const a=_(o);if(!$[a.s]){if(t.a)return o;throw e(`Cannot decode unrecognized pointer type "${a.s}".`,"decode",a.s)}for(t.U.push(o);t.U.length;)K(t,t.U.shift());return Object.values(t.R).forEach(e=>{$[e.s].c(t,e)}),t.R[o].p},G={encode:T,decode:q};export default G;