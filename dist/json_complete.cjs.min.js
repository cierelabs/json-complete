"use strict";var n=function(n,e,r){var t=new Error(n);return t.operation=e,t.type=r,t},e=function(n){return Object.prototype.toString.call(n).slice(8,-1)},r=function(n,r){if(void 0===r)return"un";if(null===r)return"nl";if(!0===r)return"tr";if(!1===r)return"fa";if("number"==typeof r){if(r===1/0)return"pI";if(r===-1/0)return"nI";if(r!=r)return"Na";if(0===r&&1/r==-1/0)return"n0"}var t=e(r),u=n.n[t];return u&&"object"==typeof r&&(t=u),n.e[t]},t=function(n,e){var r=[],t={};Array.prototype.forEach.call(n,function(n,e){t[String(e)]=1,r.push(e)});var u=0,o=Object.keys(n).filter(function(n){return!t[n]});return e&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n}))),r.concat(o).reduce(function(e,r){return r===u?(u+=1,e.t.push(n[r])):e.u.push([r,n[r]]),e},{t:[],u:[]})},u=function(t,u){var o=r(t,u);if(!o&&!t.o){var i=e(u);throw n('Cannot encode unsupported type "'+i+'".',"encode",i)}return o||"Ob"},o=function(n,e){var r=u(n,e);if(!n.f[r].i)return r;var o=n.a.c(e,r);if(void 0!==o)return o._;n.y[r]=n.y[r]||[],n.y[r].push(void 0);var i=n.y[r].length-1,f=t(e,n.d),c={l:r,p:i,_:r+i,m:e,t:n.f[r].s?[]:f.t,u:f.u};return n.a.b(e,c),n.f[r].g&&n.w.push(c),c._},i=function(n){if("function"!=typeof Map||"Map"!==e(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==e(Symbol())||!n)return!0;var r={};r[Symbol()]=1;for(var t=new Map,u=0;u<50;u+=1)t.set(Object.getOwnPropertySymbols(r)[0],{});return 1===t.size},f=function(n){if(i(n)){var e=new Map;return{c:function(n){return e.get(n)},b:function(n,r){e.set(n,r)},A:function(n,r){r=r||0;var t=0;return e.forEach(function(e){t>=r&&n(e),t+=1}),t}}}var r=[],t=[];return{c:function(n){for(var e=0;e<r.length;e+=1)if(r[e]===n)return t[e]},b:function(n,e){r.push(n),t.push(e)},A:function(n,e){var r;for(r=e||0;r<t.length;r+=1)n(t[r]);return r}}},c=function(n,e){return[e.t.map(function(e){return o(n,e)})]},a=function(n){return{l:n.slice(0,2),p:Number(n.slice(2))}},_=function(n,e){if(n.f[e])return n.f[e].R;var r=a(e);return n.f[r.l]?n.S[e].m:e},y=function(n,e,r){r.forEach(function(r){e.m[_(n,r[0])]=_(n,r[1])})},d=function(n,e){y(n,e,e.N.slice(1))},l=function(n,e){if(n.f[e])return n.f[e].R;var r=a(e);return n.f[r.l].h(n,r.l,r.p)},p=function(n){return{V:e(new n),B:function(n,e){return e.t=Array.prototype.slice.call(new Uint8Array(e.m)),c(n,e)},h:function(e,r,t){var u=e.F[r][t][0],o=new n(u.length),i=new Uint8Array(o);return u.forEach(function(n,r){i[r]=l(e,n)}),o},i:d}},v=function(n){return"function"==typeof ArrayBuffer&&(n.AB=p(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(n.Sh=p(SharedArrayBuffer)),n},m=function(n,e){e.N[0].forEach(function(r,t){e.m[t]=_(n,r)}),d(n,e)},s=function(n){return n.Ar={V:"Array",B:c,h:function(){return[]},i:m},n.rg={V:"Arguments",B:c,h:function(n,e,r){return function(){return arguments}.apply(null,Array(n.F[e][r][0].length))},i:m},n},b=function(n){return{V:e(n("")),B:function(n,e){return String(e.m)},h:function(e,r,t){return n(e.F[r][t])},i:function(){}}},g=function(n){return n.St=b(String),n.St.s=1,n.Nu=b(Number),n},w=function(n){return"function"==typeof BigInt&&(n.Bi=b(BigInt)),n},A=function(n,e,r){return{V:n,B:function(n,r){return[[void 0].concat(e.map(function(e){return o(n,r.m[e])}))]},g:function(n,e,r){var t=new FileReader;t.addEventListener("loadend",function(){n.y[e.l][e.p][0][0]=o(n,new Uint8Array(t.result)),r()}),t.readAsArrayBuffer(e.m)},h:function(n,e,t){var u=n.F[e][t][0],o=a(u[0]);return r(n,[new Uint8Array(n.F[o.l][o.p][0].map(function(e){return l(n,e)}))],u)},i:d}},R=function(n){return"function"==typeof Blob&&(n.Bl=A("Blob",["type"],function(n,e,r){return new Blob(e,{type:l(n,r[1])})})),"function"==typeof File&&(n.Fi=A("File",["type","name","lastModified"],function(n,e,r){try{return new File(e,l(n,r[2]),{type:l(n,r[1]),lastModified:l(n,r[3])})}catch(u){if(n.o){var t=new Blob(e,{type:l(n,r[1])});return t.name=l(n,r[2]),t.lastModified=l(n,r[3]),t}throw u}})),n},S=function(n){return n.Da={V:"Date",B:function(n,e){return[o(n,e.m.valueOf())]},h:function(n,e,r){return new Date(l(n,n.F[e][r][0]))},i:d},n},E={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},N=function(n){return n.Er={V:"Error",B:function(n,e){return[[o(n,E[e.m.name]?e.m.name:"Error"),o(n,e.m.message),o(n,e.m.stack)]]},h:function(n,e,r){var t=n.F[e][r][0],u=new(E[l(n,t[0])]||Error)(l(n,t[1]));return u.stack=l(n,t[2]),u},i:d},n},h=function(n){return"function"==typeof Set&&(n.Se={V:"Set",B:function(n,e){return[Array.from(e.m).map(function(e){return o(n,e)})]},h:function(){return new Set},i:function(n,e){e.N[0].forEach(function(r){e.m.add(_(n,r))}),d(n,e)}},n.Ma={V:"Map",B:function(n,e){return[Array.from(e.m).map(function(e){return[o(n,e[0]),o(n,e[1])]})]},h:function(){return new Map},i:function(n,e){e.N[0].forEach(function(r){e.m.set(_(n,r[0]),_(n,r[1]))}),d(n,e)}}),n},V=function(n){return n.Ob={V:"Object",B:function(){return[]},h:function(){return{}},i:function(n,e){y(n,e,e.N)}},n},B=function(n){return void 0===n.flags?n.options:n.flags},F=function(n){return n.Re={V:"RegExp",B:function(n,e){var r=e.m;return[[o(n,r.source),o(n,B(r)),o(n,r.lastIndex)]]},h:function(n,e,r){var t=n.F[e][r][0],u=new RegExp(l(n,t[0]),l(n,t[1]));return u.lastIndex=l(n,t[2]),u},i:d},n},M=function(n){return n.un={R:void 0},n.nl={R:null},n.tr={R:!0},n.fa={R:!1},n.pI={R:1/0},n.nI={R:-1/0},n.Na={R:NaN},n.n0={R:-0},n},U=function(n){return"function"==typeof Symbol&&(n.Sy={V:"Symbol",B:function(n,e){var r=Symbol.keyFor(e.m);return o(n,void 0!==r?"R"+r:"S"+String(e.m).slice(7,-1))},h:function(n,e,r){var t=l(n,n.F[e][r]);return"R"===t[0]?Symbol.for(t.slice(1)):Symbol(t.slice(1))},i:function(){}}),n},I=function(n){return{V:e(new n),B:c,h:function(e,r,t){return new n(e.F[r][t][0].length)},i:m}},j=function(n){return"function"==typeof Int8Array&&(n.I1=I(Int8Array),n.I2=I(Int16Array),n.I3=I(Int32Array),n.U1=I(Uint8Array),n.U2=I(Uint16Array),n.U3=I(Uint32Array),n.F3=I(Float32Array)),"function"==typeof Uint8ClampedArray&&(n.C1=I(Uint8ClampedArray)),"function"==typeof Float64Array&&(n.F4=I(Float64Array)),n},O=function(n){return{V:"_"+e(new n("")),B:function(n,e){return[o(n,e.m.valueOf())]},h:function(e,r,t){return new n(l(e,e.F[r][t][0]))},i:d}},x=function(n){return n.Bo=O(Boolean),n.NU=O(Number),n.ST=O(String),n.ST.s=1,n},C={},T=C=w(C=R(C=v(C=j(C=h(C=U(C=N(C=F(C=S(C=V(C=s(C=x(C=g(C=M(C)))))))))))))),k=function(n,e){n.y.r=e,n.y.v="1.0.0";var r=Object.keys(n.y).map(function(e){return[e,n.y[e]]});if("function"!=typeof n.M)return r;n.M(r)},z=function(n,e){return n.a.A(function(e){n.y[e.l][e.p]=T[e.l].B(n,e),e.u.length>0&&(n.y[e.l][e.p]=n.y[e.l][e.p].concat(e.u.map(function(e){return[o(n,e[0]),o(n,e[1])]})))},e)},D=function(e,r){r=r||{};var t={},u={};Object.keys(T).forEach(function(n){var e=T[n].V;e&&(t[e]=n),"_"===(e||"")[0]&&(u[e.slice(1)]=e)});var i={o:r.compat,d:r.encodeSymbolKeys,M:r.onFinish,f:T,e:t,n:u,a:f(r.encodeSymbolKeys),w:[],y:{}},c=o(i,e),a=z(i);if(!(i.w.length>0))return k(i,c);if("function"!=typeof r.onFinish){if(i.o)return k(i,c);throw n("Deferred Types require onFinish option.","encode")}var _=i.w.length,y=function(){if(0===(_-=1))return z(i,a),k(i,c)};i.w.forEach(function(n){T[n.l].g(i,n,y)})},q=function n(r,t){"Array"===e(t)?t.forEach(function(e){n(r,e)}):r.U.push(t)},K=function(r,t){var u=a(t);if(!T[u.l]){if(r.o)return;throw n('Cannot decode unrecognized pointer type "'+u.l+'".',"decode",u.l)}if(!T[t]&&void 0===r.S[t]){r.S[t]={l:u.l,p:u.p,_:t,m:void 0,N:r.F[u.l][u.p]};try{r.S[t].m=T[u.l].h(r,u.l,u.p)}catch(e){throw n('Cannot decode recognized pointer type "'+u.l+'".',"decode")}"Array"===e(r.S[t].N)&&q(r,r.S[t].N)}},G=function(e,r){var t={o:(r=r||{}).compat,f:T,F:e.reduce(function(n,e){return n[e[0]]=e[1],n},{}),S:{},U:[]},u=t.F.r;if(T[u])return T[u].R;var o=a(u);if(!T[o.l]){if(t.o)return u;throw n('Cannot decode unrecognized pointer type "'+o.l+'".',"decode",o.l)}for(t.U.push(u);t.U.length;)K(t,t.U.shift());return Object.values(t.S).forEach(function(n){T[n.l].i(t,n)}),t.S[u].m},H={encode:D,decode:G};module.exports=H;