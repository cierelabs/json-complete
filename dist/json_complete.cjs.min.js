"use strict";var n=function(n,e,r){var t=new Error(n);return t.operation=e,t.type=r,t},e=function(n){return Object.prototype.toString.call(n).slice(8,-1)},r=function(n,r){if(void 0===r)return"un";if(null===r)return"nl";if(!0===r)return"tr";if(!1===r)return"fa";if("number"==typeof r){if(r===1/0)return"pI";if(r===-1/0)return"nI";if(r!=r)return"Na";if(0===r&&1/r==-1/0)return"n0"}var t=e(r),u=n.n[t];return u&&"object"==typeof r&&(t=u),n.e[t]},t=function(n,e){var r=[],t={};Array.prototype.forEach.call(n,function(n,e){t[String(e)]=1,r.push(e)});var u=0,o=Object.keys(n).filter(function(n){return!t[n]});return e&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n}))),r.concat(o).reduce(function(e,r){return r===u?(u+=1,e.t.push(n[r])):e.u.push([r,n[r]]),e},{t:[],u:[]})},u=function(t,u){var o=r(t,u);if(!o&&!t.o){var i=e(u);throw n('Cannot encode unsupported type "'+i+'".',"encode",i)}return o||"Ob"},o=function(n,e){n.f[u(n,e)].i&&n.c.push(e)},i=function(n,e){var r=u(n,e);if(!n.f[r].i)return r;var i=n._.a(e,r);if(void 0!==i)return i.y;n.d[r]=n.d[r]||[],n.d[r].push(void 0);var f=n.d[r].length-1,c=t(e,n.l),a={p:r,m:f,y:r+f,s:e,t:n.f[r].b?[]:c.t,u:c.u};return n._.g(e,a),n.f[r].w&&n.A.push(a),a.t.forEach(function(e){o(n,e)}),a.u.forEach(function(e){o(n,e[0]),o(n,e[1])}),a.y},f=function(n){if("function"!=typeof Map||"Map"!==e(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==e(Symbol())||!n)return!0;var r={};r[Symbol()]=1;for(var t=new Map,u=0;u<50;u+=1)t.set(Object.getOwnPropertySymbols(r)[0],{});return 1===t.size},c=function(n){if(f(n)){var e=new Map;return{a:function(n){return e.get(n)},g:function(n,r){e.set(n,r)},S:function(n){e.forEach(n)}}}var r=[],t=[];return{a:function(n){for(var e=0;e<r.length;e+=1)if(r[e]===n)return t[e]},g:function(n,e){r.push(n),t.push(e)},S:function(n){for(var e=0;e<t.length;e+=1)n(t[e])}}},a=function(n,e){return[e.t.map(function(e){return i(n,e)})]},_=function(n){return{p:n.slice(0,2),m:Number(n.slice(2))}},y=function(n,e){if(n.f[e])return n.f[e].R;var r=_(e);return n.f[r.p]?n.N[e].s:e},d=function(n,e,r){r.forEach(function(r){e.s[y(n,r[0])]=y(n,r[1])})},l=function(n,e){d(n,e,e.h.slice(1))},p=function(n,e){if(n.f[e])return n.f[e].R;var r=_(e);return n.f[r.p].V(n,r.p,r.m)},v=function(n){return{j:e(new n),B:function(n,e){return e.t=Array.prototype.slice.call(new Uint8Array(e.s)),a(n,e)},V:function(e,r,t){var u=e.M[r][t][0],o=new n(u.length),i=new Uint8Array(o);return u.forEach(function(n,r){i[r]=p(e,n)}),o},i:l}},m=function(n){return"function"==typeof ArrayBuffer&&(n.AB=v(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(n.Sh=v(SharedArrayBuffer)),n},s=function(n,e){e.h[0].forEach(function(r,t){e.s[t]=y(n,r)}),l(n,e)},b=function(n){return n.Ar={j:"Array",B:a,V:function(){return[]},i:s},n.rg={j:"Arguments",B:a,V:function(n,e,r){return function(){return arguments}.apply(null,Array(n.M[e][r][0].length))},i:s},n},g=function(n){return{j:e(n("")),B:function(n,e){return String(e.s)},V:function(e,r,t){return n(e.M[r][t])},i:function(){}}},w=function(n){return n.St=g(String),n.St.b=1,n.Nu=g(Number),n},A=function(n){return"function"==typeof BigInt&&(n.Bi=g(BigInt)),n},S=function(n,e,r){return{j:n,w:function(n,e,r){var t=new FileReader;t.addEventListener("loadend",function(){e.U=i(n,new Uint8Array(t.result)),r()}),t.readAsArrayBuffer(e.s)},B:function(n,r){return[[r.U].concat(e.map(function(e){return i(n,r.s[e])}))]},V:function(n,e,t){var u=n.M[e][t][0],o=_(u[0]);return r(n,[new Uint8Array(n.M[o.p][o.m][0].map(function(e){return p(n,e)}))],u)},i:l}},E=function(n){return"function"==typeof Blob&&(n.Bl=S("Blob",["type"],function(n,e,r){return new Blob(e,{type:p(n,r[1])})})),"function"==typeof File&&(n.Fi=S("File",["type","name","lastModified"],function(n,e,r){try{return new File(e,p(n,r[2]),{type:p(n,r[1]),lastModified:p(n,r[3])})}catch(u){if(n.o){var t=new Blob(e,{type:p(n,r[1])});return t.name=p(n,r[2]),t.lastModified=p(n,r[3]),t}throw u}})),n},R=function(n){return n.Da={j:"Date",B:function(n,e){return[i(n,e.s.valueOf())]},V:function(n,e,r){return new Date(p(n,n.M[e][r][0]))},i:l},n},N={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},h=function(n){return n.Er={j:"Error",B:function(n,e){return[[i(n,N[e.s.name]?e.s.name:"Error"),i(n,e.s.message),i(n,e.s.stack)]]},V:function(n,e,r){var t=n.M[e][r][0],u=new(N[p(n,t[0])]||Error)(p(n,t[1]));return u.stack=p(n,t[2]),u},i:l},n},V=function(n){return"function"==typeof Set&&(n.Se={j:"Set",B:function(n,e){return[Array.from(e.s).map(function(e){return i(n,e)})]},V:function(){return new Set},i:function(n,e){e.h[0].forEach(function(r){e.s.add(y(n,r))}),l(n,e)}},n.Ma={j:"Map",B:function(n,e){return[Array.from(e.s).map(function(e){return[i(n,e[0]),i(n,e[1])]})]},V:function(){return new Map},i:function(n,e){e.h[0].forEach(function(r){e.s.set(y(n,r[0]),y(n,r[1]))}),l(n,e)}}),n},j=function(n){return n.Ob={j:"Object",B:function(){return[]},V:function(){return{}},i:function(n,e){d(n,e,e.h)}},n},B=function(n){return void 0===n.flags?n.options:n.flags},M=function(n){return n.Re={j:"RegExp",B:function(n,e){var r=e.s;return[[i(n,r.source),i(n,B(r)),i(n,r.lastIndex)]]},V:function(n,e,r){var t=n.M[e][r][0],u=new RegExp(p(n,t[0]),p(n,t[1]));return u.lastIndex=p(n,t[2]),u},i:l},n},U=function(n){return n.un={R:void 0},n.nl={R:null},n.tr={R:!0},n.fa={R:!1},n.pI={R:1/0},n.nI={R:-1/0},n.Na={R:NaN},n.n0={R:-0},n},F=function(n){return"function"==typeof Symbol&&(n.Sy={j:"Symbol",B:function(n,e){var r=Symbol.keyFor(e.s),t=void 0!==r;return[i(n,!!t),i(n,t?r:String(e.s).slice(7,-1))]},V:function(n,e,r){var t=n.M[e][r],u=p(n,t[1]);return p(n,t[0])?Symbol.for(u):Symbol(u)},i:function(){}}),n},I=function(n){return{j:e(new n),B:a,V:function(e,r,t){return new n(e.M[r][t][0].length)},i:s}},O=function(n){return"function"==typeof Int8Array&&(n.I1=I(Int8Array),n.I2=I(Int16Array),n.I3=I(Int32Array),n.U1=I(Uint8Array),n.U2=I(Uint16Array),n.U3=I(Uint32Array),n.F3=I(Float32Array)),"function"==typeof Uint8ClampedArray&&(n.C1=I(Uint8ClampedArray)),"function"==typeof Float64Array&&(n.F4=I(Float64Array)),n},x=function(n){return{j:"_"+e(new n("")),B:function(n,e){return[i(n,e.s.valueOf())]},V:function(e,r,t){return new n(p(e,e.M[r][t][0]))},i:l}},C=function(n){return n.Bo=x(Boolean),n.NU=x(Number),n.ST=x(String),n.ST.b=1,n},k={},z=k=A(k=E(k=m(k=O(k=V(k=F(k=h(k=M(k=R(k=j(k=b(k=C(k=w(k=U(k)))))))))))))),T=function(n,e){n._.S(function(e){n.d[e.p][e.m]=z[e.p].B(n,e),e.u.length>0&&(n.d[e.p][e.m]=n.d[e.p][e.m].concat(e.u.map(function(e){return[i(n,e[0]),i(n,e[1])]})))}),n.d.r=e,n.d.v="1.0.0";var r=Object.keys(n.d).map(function(e){return[e,n.d[e]]});if("function"!=typeof n.F)return r;n.F(r)},D=function(e,r){var t={o:(r=r||{}).compat,l:r.encodeSymbolKeys,F:r.onFinish,f:z,e:Object.keys(z).reduce(function(n,e){var r=z[e].j;return r&&(n[r]=e),n},{}),n:Object.keys(z).reduce(function(n,e){var r=z[e].j;return"_"===(r||"")[0]&&(n[r.slice(1)]=r),n},{}),_:c(r.encodeSymbolKeys),c:[],A:[],d:{}},u=i(t,e);if(z[u])return T(t,u);for(t.c.push(e);t.c.length;)i(t,t.c.shift());if(!(t.A.length>0))return T(t,u);if("function"!=typeof r.onFinish){if(t.o)return T(t,u);throw n("Found deferred type, but no onFinish option provided.","encode")}var o=t.A.length,f=function(){if(0===(o-=1))return T(t,u)};t.A.forEach(function(n){z[n.p].w(t,n,f)})},K=function n(r,t){"Array"===e(t)?t.forEach(function(e){n(r,e)}):r.c.push(t)},q=function(r,t){var u=_(t);if(!z[u.p]){if(r.o)return;throw n('Cannot decode unrecognized pointer type "'+u.p+'".',"decode",u.p)}if(!z[t]&&void 0===r.N[t]){r.N[t]={p:u.p,m:u.m,y:t,s:void 0,h:r.M[u.p][u.m]};try{r.N[t].s=z[u.p].V(r,u.p,u.m)}catch(e){throw n('Cannot generate recognized object type from pointer type "'+u.p+'".',"decode")}"Array"===e(r.N[t].h)&&K(r,r.N[t].h)}},G=function(e,r){var t={o:(r=r||{}).compat,f:z,M:e.reduce(function(n,e){return n[e[0]]=e[1],n},{}),N:{},c:[]},u=t.M.r;if(z[u])return z[u].R;var o=_(u);if(!z[o.p]){if(t.o)return u;throw n('Cannot decode unrecognized pointer type "'+o.p+'".',"decode",o.p)}for(t.c.push(u);t.c.length;)q(t,t.c.shift());return Object.values(t.N).forEach(function(n){z[n.p].i(t,n)}),t.N[u].s},H={encode:D,decode:G};module.exports=H;