/* @license BSL-1.0 https://git.io/fpQEc */
"use strict";var n=function(n){return Object.prototype.toString.call(n).slice(8,-1)},e=function(e,r){if(void 0===r)return"un";if(null===r)return"nl";if(!0===r)return"tr";if(!1===r)return"fa";if("number"==typeof r){if(r===1/0)return"pI";if(r===-1/0)return"nI";if(r!=r)return"Na";if(0===r&&1/r==-1/0)return"n0"}var t=n(r),u=e.n[t];return u&&"object"==typeof r&&(t=u),e.e[t]},r=function(e){if("function"!=typeof Map||"Map"!==n(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==n(Symbol())||!e)return!0;var r={};r[Symbol()]=1;for(var t=new Map,u=0;u<50;u+=1)t.set(Object.getOwnPropertySymbols(r)[0],{});return 1===t.size},t=function(n){if(r(n)){var e=new Map;return{t:function(n){return e.get(n)},u:function(n,r){e.set(n,r)},o:function(n,r){r=r||0;var t=0;return e.forEach(function(e){t>=r&&n(e),t+=1}),t}}}var t=[],u=[];return{t:function(n){for(var e=0;e<t.length;e+=1)if(t[e]===n)return u[e]},u:function(n,e){t.push(n),u.push(e)},o:function(n,e){var r;for(r=e||0;r<u.length;r+=1)n(u[r]);return r}}},u=function(n,e){var r=[],t={};Array.prototype.forEach.call(n,function(n,e){t[String(e)]=1,r.push(e)});var u=Object.keys(n).filter(function(n){return!t[n]});e&&(u=u.concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n})));var o=0;return r.concat(u).reduce(function(e,r){return r===o?(o+=1,e.i.push(n[r])):(e.f.push(r),e.c.push(n[r])),e},{i:[],f:[],c:[]})},o=function(n){return{a:n.slice(0,2),_:Number(n.slice(2))}},i=function(n,e){if(n.y[e])return n.y[e].d;var r=o(e);return n.y[r.a]?n.p[e].l:e},f=function(n,e){for(var r=0;r<e.m[0].length;r+=1)e.l[r]=i(n,e.m[0][r])},c=function(n,e,r,t){for(var u=0;u<(e.m[r]||[]).length;u+=1){var o=e.m[r][u];if("Sy"===o.slice(0,2)&&"function"!=typeof Symbol&&n.s)return;e.l[i(n,o)]=i(n,e.m[t][u])}},a=function(n,e){if(n.y[e])return n.y[e].d;var r=o(e);return n.y[r.a].b(n,n.g[r.a][r._])},_=function(n,e){return 0===e.f.length?n:n.concat([e.f,e.c])},y=function(e){return{w:n(new e),A:function(n,e){return _([Array.prototype.slice.call(new Uint8Array(n))],e)},b:function(n,r){var t=r[0],u=new e(t.length),o=new Uint8Array(u);return t.forEach(function(e,r){o[r]=a(n,e)}),u},S:function(n,e){f(n,e),c(n,e,1,2)}}},d=function(n){return"function"==typeof ArrayBuffer&&(n.AB=y(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(n.Sh=y(SharedArrayBuffer)),n},l=function(n){return n.Ar={w:"Array",A:function(n,e){return _([e.i],e)},b:function(){return[]},S:function(n,e){f(n,e),c(n,e,1,2)}},n.rg={w:"Arguments",A:function(n,e){return _([e.i],e)},b:function(n,e){return function(){return arguments}.apply(null,Array(e[0].length))},S:function(n,e){f(n,e),c(n,e,1,2)}},n},p=function(e){return{w:n(e("")),A:function(n){return String(n)},b:function(n,r){return e(r)},S:function(){}}},v=function(n){return n.St=p(String),n.Nu=p(Number),n},m=function(e){return{w:n(new e),R:2,A:function(n,e){return _([e.i],e)},b:function(n,r){return new e(r[0].length)},S:function(n,e){f(n,e),c(n,e,1,2)}}},s=function(n){return"function"==typeof BigInt&&(n.Bi=p(BigInt)),"function"==typeof BigInt64Array&&(n.BI=m(BigInt64Array)),"function"==typeof BigUint64Array&&(n.BU=m(BigUint64Array)),n},b=function(n,e,r){return{w:n,A:function(n,r){return _([[void 0].concat(e.map(function(e){return n[e]}))],r)},N:function(n,e,r,t){var u=new FileReader;u.addEventListener("loadend",function(){e[0][0]=r(new Uint8Array(u.result)),t()}),u.readAsArrayBuffer(n)},b:function(n,e){var t=o(e[0][0]),u="un"===t.a?[]:n.g[t.a][t._][0];return r(n,[new Uint8Array(u.map(function(e){return a(n,e)}))],e[0])},S:function(n,e){c(n,e,1,2)}}},g=function(n){return"function"==typeof Blob&&(n.Bl=b("Blob",["type"],function(n,e,r){return new Blob(e,{type:a(n,r[1])})})),"function"==typeof File&&(n.Fi=b("File",["type","name","lastModified"],function(n,e,r){try{return new File(e,a(n,r[2]),{type:a(n,r[1]),lastModified:a(n,r[3])})}catch(u){if(n.s){var t=new Blob(e,{type:a(n,r[1])});return t.name=a(n,r[2]),t.lastModified=a(n,r[3]),t}throw u}})),n},w=function(n){return n.Da={w:"Date",A:function(n,e){return _([[n.valueOf()]],e)},b:function(n,e){return new Date(a(n,e[0][0]))},S:function(n,e){c(n,e,1,2)}},n},A={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},S=function(n){return n.Er={w:"Error",A:function(n,e){return _([[A[n.name]?n.name:"Error",n.message,n.stack]],e)},b:function(n,e){var r=e[0],t=new(A[a(n,r[0])]||Error)(a(n,r[1]));return t.stack=a(n,r[2]),t},S:function(n,e){c(n,e,1,2)}},n},E=function(n){return"function"==typeof Set&&(n.Se={w:"Set",A:function(n,e){var r=[];return n.forEach(function(n){r.push(n)}),_([r],e)},b:function(){return new Set},S:function(n,e){e.m[0].forEach(function(r){e.l.add(i(n,r))}),c(n,e,1,2)}},n.Ma={w:"Map",B:1,A:function(n,e){var r=[],t=[];return n.forEach(function(n,e){r.push(e),t.push(n)}),_([r,t],e)},b:function(){return new Map},S:function(n,e){for(var r=0;r<e.m[0].length;r+=1)e.l.set(i(n,e.m[0][r]),i(n,e.m[1][r]));c(n,e,2,3)}}),n},R=function(n){return n.Ob={w:"Object",A:function(n,e){return _([],e)},b:function(){return{}},S:function(n,e){c(n,e,0,1)}},n},N=function(n){return void 0===n.flags?n.options:n.flags},B=function(n){return n.Re={w:"RegExp",A:function(n,e){return _([[n.source,N(n),n.lastIndex]],e)},b:function(n,e){var r=e[0],t=new RegExp(a(n,r[0]),a(n,r[1]));return t.lastIndex=a(n,r[2]),t},S:function(n,e){c(n,e,1,2)}},n},V=function(n){return n.un={d:void 0},n.nl={d:null},n.tr={d:!0},n.fa={d:!1},n.pI={d:1/0},n.nI={d:-1/0},n.Na={d:NaN},n.n0={d:-0},n},h=function(n){return"function"==typeof Symbol&&(n.Sy={w:"Symbol",A:function(n){var e=Symbol.keyFor(n);return void 0!==e?"R"+e:" "+String(n).slice(7,-1)},b:function(n,e){return"R"===e[0]?Symbol.for(e.slice(1)):Symbol(e.slice(1))},S:function(){}}),n},U=function(n){return"function"==typeof Int8Array&&(n.I1=m(Int8Array),n.I2=m(Int16Array),n.I3=m(Int32Array),n.U1=m(Uint8Array),n.U2=m(Uint16Array),n.U3=m(Uint32Array),n.F3=m(Float32Array)),"function"==typeof Uint8ClampedArray&&(n.C1=m(Uint8ClampedArray)),"function"==typeof Float64Array&&(n.F4=m(Float64Array)),n},I=function(e){return{w:"_"+n(new e("")),A:function(n,e){return _([[n.valueOf()]],e)},b:function(n,r){return new e(a(n,r[0][0]))},S:function(n,e){c(n,e,1,2)}}},F=function(n){return n.Bo=I(Boolean),n.NU=I(Number),n.ST=I(String),n},M={},O=M=s(M=g(M=d(M=U(M=E(M=h(M=S(M=B(M=w(M=R(M=l(M=F(M=v(M=V(M)))))))))))))),j=function(r,t){var u=e(r,t);if(!u&&!r.s){var o=n(t);throw new Error('Cannot encode unsupported type "'+o+'".')}return u||"Ob"},x=function(n,e){var r=j(n,e);if(!n.y[r].S)return r;var t=n.V.t(e,r);if(void 0!==t)return t.h;n.U[r]=n.U[r]||[],n.U[r].push(0);var u=n.U[r].length-1,o={a:r,_:u,h:r+u,l:e};return n.V.u(e,o),n.y[r].N&&n.I.push(o),o.h},C=function(e,r){return e.V.o(function(r){var t=O[r.a].A(r.l,u(r.l,e.F));"String"!==n(t)&&(t=t.map(function(n){return n.map(function(n){return x(e,n)})})),e.U[r.a][r._]=t},r)},T=function(n,e){n.U.r=e,n.U.v="1.0.0";var r=JSON.stringify(Object.keys(n.U).map(function(e){return[e,n.U[e]]}));if("function"!=typeof n.M)return r;n.M(r)},k=function(n,e){e=e||{};var r={},u={};Object.keys(O).forEach(function(n){var e=O[n].w;e&&(r[e]=n),"_"===(e||"")[0]&&(u[e.slice(1)]=e)});var o={s:e.compat,F:e.encodeSymbolKeys,M:e.onFinish,y:O,e:r,n:u,V:t(e.encodeSymbolKeys),I:[],U:{}},i=x(o,n),f=C(o);if(!(o.I.length>0))return T(o,i);if("function"!=typeof e.onFinish){if(o.s)return T(o,i);throw new Error("Deferred Types require onFinish option.")}var c=o.I.length,a=function(){if(0===(c-=1))return C(o,f),T(o,i)};o.I.forEach(function(n){O[n.a].N(n.l,o.U[n.a][n._],function(n){return x(o,n)},a)})},z=function e(r,t){"Array"===n(t)?t.forEach(function(n){e(r,n)}):r.O.push(t)},D=function(e,r){var t=o(r);if(!O[t.a]){if(e.s)return;throw new Error('Cannot decode unrecognized pointer type "'+t.a+'".')}if(!O[r]&&void 0===e.p[r]){e.p[r]={a:t.a,_:t._,h:r,l:void 0,m:e.g[t.a][t._]};try{e.p[r].l=O[t.a].b(e,e.g[t.a][t._])}catch(n){if(!e.s)throw new Error('Cannot decode recognized pointer type "'+t.a+'".')}"Array"===n(e.p[r].m)&&z(e,e.p[r].m)}},J=function(n,e){var r={s:(e=e||{}).compat,y:O,g:JSON.parse(n).reduce(function(n,e){return n[e[0]]=e[1],n},{}),p:{},O:[]},t=r.g.r;if(O[t])return O[t].d;var u=o(t);if(!O[u.a]){if(r.s)return t;throw new Error('Cannot decode unrecognized pointer type "'+u.a+'".')}for(r.O.push(t);r.O.length;)D(r,r.O.shift());return Object.values(r.p).forEach(function(n){O[n.a].S(r,n)}),r.p[t].l},q={encode:k,decode:J};module.exports=q;