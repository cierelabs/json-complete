"use strict";var n=function(n,e,r){var t=new Error(n);return t.operation=e,t.type=r,t},e=function(n){return Object.prototype.toString.call(n).slice(8,-1)},r=function(n,r){if(void 0===r)return"un";if(null===r)return"nl";if(!0===r)return"tr";if(!1===r)return"fa";if("number"==typeof r){if(r===1/0)return"pI";if(r===-1/0)return"nI";if(r!=r)return"Na";if(0===r&&1/r==-1/0)return"n0"}var t=e(r),u=n.n[t];return u&&"object"==typeof r&&(t=u),n.e[t]},t=function(n,e){var r=[],t={};Array.prototype.forEach.call(n,function(n,e){t[String(e)]=1,r.push(e)});var u=0,o=Object.keys(n).filter(function(n){return!t[n]});return e&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n}))),r.concat(o).reduce(function(e,r){return r===u?(u+=1,e.t.push(n[r])):e.u.push([r,n[r]]),e},{t:[],u:[]})},u=function(t,u){var o=r(t,u);if(!o&&!t.o){var i=e(u);throw n('Cannot encode unsupported type "'+i+'".',"encode",i)}return o||"Ob"},o=function(n,e){n.f[u(n,e)].i&&n.c.push(e)},i=function(n,e){var r=u(n,e);if(!n.f[r].i)return r;var i=n._.a(e,r);if(void 0!==i)return i.y;n.d[r]=n.d[r]||[],n.d[r].push(void 0);var f=n.d[r].length-1,c=t(e,n.l),a={p:r,m:f,y:r+f,s:e,t:n.f[r].b?[]:c.t,u:c.u};return n._.g(e,a),n.f[r].A&&n.w.push(a),a.t.forEach(function(e){o(n,e)}),a.u.forEach(function(e){o(n,e[0]),o(n,e[1])}),a.y},f=function(n){if("function"!=typeof Map||"Map"!==e(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==e(Symbol())||!n)return!0;var r={};r[Symbol()]=1;for(var t=new Map,u=0;u<50;u+=1)t.set(Object.getOwnPropertySymbols(r)[0],{});return 1===t.size},c=function(n){if(f(n)){var e=new Map;return{a:function(n){return e.get(n)},g:function(n,r){e.get(n)||e.set(n,r)},S:function(n){e.forEach(n)}}}var r=[],t=[],u=function(n){for(var e=0;e<r.length;e+=1)if(r[e]===n)return t[e]};return{a:u,g:function(n,e){u(n)||(r.push(n),t.push(e))},S:function(n){for(var e=0;e<t.length;e+=1)n(t[e])}}},a=function(n,e){return[e.t.map(function(e){return i(n,e)})]},_=function(n){return{p:n.slice(0,2),m:Number(n.slice(2))}},y=function(n,e){if(n.f[e])return n.f[e].R;var r=_(e);return n.f[r.p]?n.N[e].s:e},d=function(n,e,r){r.forEach(function(r){e.s[y(n,r[0])]=y(n,r[1])})},l=function(n,e){d(n,e,e.h.slice(1))},p=function(n,e){if(n.f[e])return n.f[e].R;var r=_(e);return n.f[r.p].V(n,r.p,r.m)},v=function(n){return{j:e(new n),M:function(n,e){return e.t=Array.prototype.slice.call(new Uint8Array(e.s)),a(n,e)},V:function(e,r,t){var u=e.U[r][t][0],o=new n(u.length),i=new Uint8Array(o);return u.forEach(function(n,r){i[r]=p(e,n)}),o},i:l}},m=function(n){return"function"==typeof ArrayBuffer&&(n.AB=v(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(n.Sh=v(SharedArrayBuffer)),n},s=function(n,e){e.h[0].forEach(function(r,t){e.s[t]=y(n,r)}),l(n,e)},b=function(n){return n.Ar={j:"Array",M:a,V:function(){return[]},i:s},n.rg={j:"Arguments",M:a,V:function(n,e,r){return function(){return arguments}.apply(null,Array(n.U[e][r][0].length))},i:s},n},g=function(n){return{j:e(n("")),M:function(n,e){return String(e.s)},V:function(e,r,t){return n(e.U[r][t])},i:function(){}}},A=function(n){return n.St=g(String),n.St.b=1,n.Nu=g(Number),n},w=function(n){return"function"==typeof BigInt&&(n.Bi=g(BigInt)),n},S=function(n,e,r){return{j:n,A:function(n,e,r){var t=new FileReader;t.addEventListener("loadend",function(){e.B=i(n,new Uint8Array(t.result)),r()}),t.readAsArrayBuffer(e.s)},M:function(n,r){return[[r.B].concat(e.map(function(e){return i(n,r.s[e])}))]},V:function(n,e,t){var u=n.U[e][t][0],o=_(u[0]);return r(n,[new Uint8Array(n.U[o.p][o.m][0].map(function(e){return p(n,e)}))],u)},i:l}},E=function(n){return"function"==typeof Blob&&(n.Bl=S("Blob",["type"],function(n,e,r){return new Blob(e,{type:p(n,r[1])})})),"function"==typeof File&&(n.Fi=S("File",["name","type","lastModified"],function(n,e,r){try{return new File(e,p(n,r[1]),{type:p(n,r[2]),lastModified:p(n,r[3])})}catch(n){console.log(n.message)}})),n},R=function(n){return n.Da={j:"Date",M:function(n,e){return[i(n,e.s.valueOf())]},V:function(n,e,r){return new Date(p(n,n.U[e][r][0]))},i:l},n},N={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},h=function(n){return n.Er={j:"Error",M:function(n,e){return[[i(n,N[e.s.name]?e.s.name:"Error"),i(n,e.s.message),i(n,e.s.stack)]]},V:function(n,e,r){var t=n.U[e][r][0],u=new(N[p(n,t[0])]||Error)(p(n,t[1]));return u.stack=p(n,t[2]),u},i:l},n},V=function(n){return"function"==typeof Set&&(n.Se={j:"Set",M:function(n,e){return[Array.from(e.s).map(function(e){return i(n,e)})]},V:function(){return new Set},i:function(n,e){e.h[0].forEach(function(r){e.s.add(y(n,r))}),l(n,e)}},n.Ma={j:"Map",M:function(n,e){return[Array.from(e.s).map(function(e){return[i(n,e[0]),i(n,e[1])]})]},V:function(){return new Map},i:function(n,e){e.h[0].forEach(function(r){e.s.set(y(n,r[0]),y(n,r[1]))}),l(n,e)}}),n},j=function(n){return n.Ob={j:"Object",M:function(){return[]},V:function(){return{}},i:function(n,e){d(n,e,e.h)}},n},M=function(n){return n.Re={j:"RegExp",M:function(n,e){var r=e.s;return[[i(n,r.source),i(n,void 0===r.flags?r.options:r.flags),i(n,r.lastIndex)]]},V:function(n,e,r){var t=n.U[e][r][0],u=new RegExp(p(n,t[0]),p(n,t[1]));return u.lastIndex=p(n,t[2]),u},i:l},n},U=function(n){return n.un={R:void 0},n.nl={R:null},n.tr={R:!0},n.fa={R:!1},n.pI={R:1/0},n.nI={R:-1/0},n.Na={R:NaN},n.n0={R:-0},n},B=function(n){return"function"==typeof Symbol&&(n.Sy={j:"Symbol",M:function(n,e){var r=Symbol.keyFor(e.s),t=void 0!==r;return[i(n,!!t),i(n,t?r:String(e.s).slice(7,-1))]},V:function(n,e,r){var t=n.U[e][r],u=p(n,t[1]);return p(n,t[0])?Symbol.for(u):Symbol(u)},i:function(){}}),n},F=function(n){return{j:e(new n),M:a,V:function(e,r,t){return new n(e.U[r][t][0].length)},i:s}},I=function(n){return"function"==typeof Int8Array&&(n.I1=F(Int8Array),n.I2=F(Int16Array),n.I3=F(Int32Array),n.U1=F(Uint8Array),n.U2=F(Uint16Array),n.U3=F(Uint32Array),n.F3=F(Float32Array)),"function"==typeof Uint8ClampedArray&&(n.C1=F(Uint8ClampedArray)),"function"==typeof Float64Array&&(n.F4=F(Float64Array)),n},O=function(n){return{j:"_"+e(new n("")),M:function(n,e){return[i(n,e.s.valueOf())]},V:function(e,r,t){return new n(p(e,e.U[r][t][0]))},i:l}},x=function(n){return n.Bo=O(Boolean),n.NU=O(Number),n.ST=O(String),n.ST.b=1,n},C={},k=C=w(C=E(C=m(C=I(C=V(C=B(C=h(C=M(C=R(C=j(C=b(C=x(C=A(C=U(C)))))))))))))),z=function(n,e){n._.S(function(e){n.d[e.p][e.m]=k[e.p].M(n,e),e.u.length>0&&(n.d[e.p][e.m]=n.d[e.p][e.m].concat(e.u.map(function(e){return[i(n,e[0]),i(n,e[1])]})))}),n.d.r=e,n.d.v="1.0.0";var r=Object.keys(n.d).map(function(e){return[e,n.d[e]]});if("function"!=typeof n.F)return r;n.F(r)},T=function(e,r){var t={o:(r=r||{}).safeMode,l:r.encodeSymbolKeys,F:r.onFinish,f:k,e:Object.keys(k).reduce(function(n,e){var r=k[e].j;return r&&(n[r]=e),n},{}),n:Object.keys(k).reduce(function(n,e){var r=k[e].j;return"_"===(r||"")[0]&&(n[r.slice(1)]=r),n},{}),_:c(r.encodeSymbolKeys),c:[],w:[],d:{}},u=i(t,e);if(k[u])return z(t,u);for(t.c.push(e);t.c.length;)i(t,t.c.shift());if(!(t.w.length>0))return z(t,u);if("function"!=typeof r.onFinish){if(t.o)return z(t,u);throw n("Found deferred type, but no onFinish option provided.","encode")}var o=t.w.length,f=function(){if(0===(o-=1))return z(t,u)};t.w.forEach(function(n){k[n.p].A(t,n,f)})},D=function n(r,t){"Array"===e(t)?t.forEach(function(e){n(r,e)}):r.c.push(t)},K=function(r,t){var u=_(t);if(!k[u.p]){if(r.o)return;throw n('Cannot decode unrecognized pointer type "'+u.p+'".',"decode",u.p)}if(!k[t]&&void 0===r.N[t]){r.N[t]={p:u.p,m:u.m,y:t,s:void 0,h:r.U[u.p][u.m]};try{r.N[t].s=k[u.p].V(r,u.p,u.m)}catch(e){throw n('Cannot generate recognized object type from pointer type "'+u.p+'".',"decode")}"Array"===e(r.N[t].h)&&D(r,r.N[t].h)}},q=function(e,r){var t={o:(r=r||{}).safeMode,f:k,U:e.reduce(function(n,e){return n[e[0]]=e[1],n},{}),N:{},c:[]},u=t.U.r;if(k[u])return k[u].R;var o=_(u);if(!k[o.p]){if(t.o)return u;throw n('Cannot decode unrecognized pointer type "'+o.p+'".',"decode",o.p)}for(t.c.push(u);t.c.length;)K(t,t.c.shift());return Object.values(t.N).forEach(function(n){k[n.p].i(t,n)}),t.N[u].s},G={encode:T,decode:q};module.exports=G;